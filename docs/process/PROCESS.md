# è¿‡ç¨‹æ€§æ–‡æ¡£

# 1. éœ€æ±‚è°ƒç ”ä¸ç«‹é¡¹é˜¶æ®µ

åœ¨æ“ä½œç³»ç»Ÿå­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œå­¦ç”Ÿé¢ä¸´çš„æ ¸å¿ƒå›°å¢ƒåœ¨äºâ€œç†è®ºæŠ½è±¡åŒ–â€ä¸â€œä»£ç å¤æ‚åŒ–â€ä¹‹é—´çš„å·¨å¤§é¸¿æ²Ÿã€‚å½“å‰çš„æ•™å­¦ä½“ç³»è™½ç„¶æä¾›äº†é€»è¾‘ä¸¥å¯†çš„æ•™æï¼Œèƒ½å¤Ÿè®©å­¦ç”Ÿåœ¨å®è§‚ä¸Šç†è§£è¿›ç¨‹ç®¡ç†ã€å†…å­˜åˆ†é…ã€æ–‡ä»¶ç³»ç»Ÿç­‰åº•å±‚æœºåˆ¶ï¼Œä½†æ•™æçš„ç¯‡å¹…å’Œç»“æ„å¾€å¾€å¯¼è‡´çŸ¥è¯†ç‚¹çš„ç¦»æ•£åŒ–ã€‚å­¦ç”Ÿåœ¨è¯•å›¾ç†è§£ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿè°ƒç”¨æˆ–å†…æ ¸æœºåˆ¶æ—¶ï¼Œç»å¸¸ä¼šé™·å…¥ä¸€ç§ç´¢å¼•å›°å¢ƒï¼šä¸€æ–¹é¢ï¼Œç”±äºç¼ºä¹å¯¹ç« èŠ‚ç»“æ„çš„å…¨å±€æŠŠæ¡ï¼Œä»–ä»¬éš¾ä»¥åœ¨æ•°åƒé¡µçš„æ•™æä¸­ç²¾å‡†å®šä½åˆ°æŸä¸ªç‰¹å®šæŠ€æœ¯ç»†èŠ‚çš„åŸå§‹å‡ºå¤„ï¼›å¦ä¸€æ–¹é¢ï¼Œç”±äºæ“ä½œç³»ç»ŸçŸ¥è¯†çš„é«˜åº¦è€¦åˆæ€§ï¼Œåˆå­¦è€…åœ¨æ¥è§¦æŸä¸ªæ·±å¥¥çŸ¥è¯†ç‚¹æ—¶ï¼Œå¾€å¾€å› ä¸ºç¼ºä¹å¯¹è¯¥ç« èŠ‚å‰ç½®åŸºç¡€çŸ¥è¯†çš„æŒæ¡è€Œäº§ç”Ÿç†è§£æ–­å±‚ã€‚

## 1.1 æ™ºèƒ½åŒ–æ•™æè¯­ä¹‰æ£€ç´¢ä¸å¼•å¯¼éœ€æ±‚

ä¸ºè§£å†³å­¦ç”Ÿåœ¨åºæ‚æ•™æä½“ç³»ä¸­çš„â€œç´¢å¼•å›°å¢ƒâ€ï¼Œç³»ç»Ÿéœ€è¦å®ç°ä¸€å¥—èƒ½å¤Ÿæ·±åº¦ç†è§£æ•™å­¦é€»è¾‘çš„æ£€ç´¢æœºåˆ¶ã€‚

- **è‡ªç„¶è¯­è¨€äº¤äº’éœ€æ±‚ï¼š**
    - ç³»ç»Ÿåº”æä¾›ç»Ÿä¸€çš„è‡ªç„¶è¯­è¨€è¾“å…¥å…¥å£ï¼Œæ”¯æŒå­¦ç”Ÿè¾“å…¥éç»“æ„åŒ–çš„çŸ¥è¯†ç‚¹æŸ¥è¯¢ï¼ˆå¦‚â€œè§£é‡Šä¸€ä¸‹è™šæ‹Ÿåœ°å€æ˜¯å¦‚ä½•è½¬æ¢çš„â€ï¼‰ã€‚
    - **è¯­ä¹‰è§£ææ ‡å‡†ï¼š** ç³»ç»Ÿåº”å…·å¤‡æ·±åº¦æ„å›¾è§£æèƒ½åŠ›ï¼Œèƒ½å¤Ÿè¯†åˆ«ç”¨æˆ·é—®é¢˜ä¸­çš„æ ¸å¿ƒæ¦‚å¿µã€å…³è”æœ¯è¯­åŠå…¶åœ¨æ“ä½œç³»ç»ŸçŸ¥è¯†ä½“ç³»ä¸­çš„å±‚çº§ä½ç½®ï¼Œè€Œéç®€å•çš„å­—ç¬¦ä¸²åŒ¹é…ã€‚
- **å¤šæºæ•™æåˆ‡ç‰‡èšåˆé€»è¾‘ï¼š**
    - **è¯­ä¹‰æ£€ç´¢ç²¾åº¦ï¼š** åŸºäºåŸç”Ÿå¼€å‘çš„å‘é‡æœç´¢ç®—æ³•ï¼Œç³»ç»Ÿåº”èƒ½è·¨ç« èŠ‚æ£€ç´¢ç›¸å…³å†…å®¹ã€‚å½“çŸ¥è¯†ç‚¹åˆ†å¸ƒåœ¨ä¸åŒç¯‡å¹…æ—¶ï¼ˆå¦‚å†…å­˜ç®¡ç†ç« èŠ‚çš„ç†è®ºä¸ç¡¬ä»¶æ¶æ„ç« èŠ‚çš„å®ç°ï¼‰ï¼Œç³»ç»Ÿéœ€è‡ªåŠ¨å®Œæˆè¯­ä¹‰å¯¹é½ä¸åˆ‡ç‰‡èšåˆã€‚
    - **å…³è”èƒŒæ™¯è¡¥å…¨ï¼š** ç³»ç»Ÿéœ€å…·å¤‡â€œçŸ¥è¯†ä¾èµ–æ€§è¯†åˆ«â€åŠŸèƒ½ã€‚å½“ç”¨æˆ·æŸ¥è¯¢é«˜é˜¶çŸ¥è¯†ç‚¹æ—¶ï¼Œç³»ç»Ÿåº”è‡ªåŠ¨æ£€ç´¢å¹¶å‘ˆç°ä¸ä¹‹å¼ºç›¸å…³çš„åŸºç¡€å‰ç½®çŸ¥è¯†ï¼Œè¾…åŠ©å­¦ç”Ÿæ„å»ºå®Œæ•´çš„é€»è¾‘é“¾æ¡ã€‚
- **å¤§æ¨¡å‹æ•™å¸ˆåŒ–è®²è§£æ ‡å‡†ï¼š**
    - ç³»ç»Ÿåº”é€šè¿‡é¢„è®¾çš„ Prompt æ¡†æ¶çº¦æŸå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„è¡Œä¸ºã€‚æ¨¡å‹å¿…é¡»å°†æ•™æä¸­çš„å­¦æœ¯è¯­è¨€è½¬åŒ–ä¸ºå¤šå±‚çº§çš„æ•™å­¦è¯­è¨€ï¼ˆå¦‚â€œç±»æ¯”è¯´æ˜â€ã€â€œé€»è¾‘æ¨æ¼”â€ã€â€œæ€»ç»“æç‚¼â€ï¼‰ã€‚
    - **ç”Ÿæˆè´¨é‡æ§åˆ¶ï¼š** ç”Ÿæˆçš„å›ç­”å¿…é¡»ä¸¥æ ¼åŸºäºæ£€ç´¢åˆ°çš„æ•™æåˆ‡ç‰‡ï¼Œä¸¥ç¦è„±ç¦»æ•™æèŒƒå›´è¿›è¡Œæ— æ ¹æ®çš„å‘æŒ¥ï¼Œç¡®ä¿æ•™å­¦å†…å®¹çš„ä¸¥è°¨æ€§ã€‚

## 1.2 è¯­æ³•æ„ŸçŸ¥å‹æºç æ£€ç´¢ä¸æ˜ å°„éœ€æ±‚

ä¸ºå®ç°ç†è®ºä¸å®è·µçš„çºµå‘è´¯é€šï¼Œç³»ç»Ÿéœ€è¦æ”¯æŒå¯¹ Linux å†…æ ¸æºç çš„ç²¾å‡†å®šä½ä¸æ·±åº¦è§£æã€‚

- **æºç è§£æä¸å‘é‡åŒ–å­˜å‚¨è§„æ ¼ï¼š**
    - **è¯­æ³•æ„ŸçŸ¥åˆ‡åˆ†ï¼š** ç³»ç»Ÿåº”å®ç°é’ˆå¯¹ C è¯­è¨€çš„è¯­æ³•è§£æå™¨ï¼Œèƒ½å¤Ÿç²¾å‡†è¯†åˆ«å‡½æ•°å®šä¹‰å—ã€ç»“æ„ä½“ï¼ˆstructï¼‰å£°æ˜ã€å®å®šä¹‰åŠå…³é”®æ³¨é‡Šã€‚ç¦æ­¢é‡‡ç”¨ç”Ÿç¡¬çš„å›ºå®šé•¿åº¦åˆ‡åˆ†ï¼Œå¿…é¡»ç¡®ä¿ä»£ç é€»è¾‘å—çš„å®Œæ•´æ€§ã€‚
    - **å¤šç»´å…ƒæ•°æ®ç´¢å¼•ï¼š** æ¯ä¸ªæºç å‘é‡å—éœ€å…³è”å…¶åœ¨å†…æ ¸æ ‘ä¸­çš„å®Œæ•´è·¯å¾„ï¼ˆFile Pathï¼‰ã€èµ·å§‹è¡Œå·åŠæ‰€å±å­ç³»ç»Ÿæ ‡ç­¾ï¼ˆSubsystem Tagï¼‰ï¼Œä¸ºåç»­çš„è·¯å¾„æº¯æºæä¾›æ•°æ®æ”¯æŒã€‚
- **ç†è®º-æºç è·¨æ¨¡æ€æ£€ç´¢æ˜ å°„ï¼š**
    - ç³»ç»Ÿåº”æ”¯æŒâ€œç†è®ºç‚¹æ‹¨æºç â€åŠŸèƒ½ã€‚å½“ç”¨æˆ·åœ¨æ•™æè§†å›¾æé—®æ—¶ï¼Œç³»ç»Ÿåº”æ ¹æ®è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œåœ¨ `kernel/`ã€`mm/`ã€`fs/` ç­‰æ ¸å¿ƒç›®å½•ä¸‹è‡ªåŠ¨æ£€ç´¢å¯¹åº”çš„ C è¯­è¨€å®ç°é€»è¾‘ã€‚
    - **æ£€ç´¢å‡†ç¡®æ€§æŒ‡æ ‡ï¼š** ç³»ç»Ÿéœ€ç¡®ä¿å¯¹äºæ ¸å¿ƒç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ `fork`, `mmap` ç­‰ï¼‰çš„æºç æ£€ç´¢å‡†ç¡®ç‡è¾¾åˆ°å·¥ä¸šçº§æ ‡å‡†ï¼Œèƒ½å¤Ÿç›´æ¥å®šä½åˆ°å…·ä½“çš„å†…æ ¸å…¥å£å‡½æ•°ã€‚
- **æºç å‘ˆç°ä¸äº¤äº’éœ€æ±‚ï¼š**
    - **å®æ—¶æ¸²æŸ“ï¼š** ç³»ç»Ÿåº”é›†æˆä¸“ä¸šçº§çš„ä»£ç æ¸²æŸ“ç»„ä»¶ï¼Œæ”¯æŒ C è¯­è¨€è¯­æ³•é«˜äº®ã€ç¼©è¿›è¯†åˆ«ã€‚
    - **è·¯å¾„æº¯æºæœºåˆ¶ï¼š** æ¯ä¸€ä¸ªå±•ç¤ºç»™ç”¨æˆ·çš„ä»£ç ç‰‡æ®µå¿…é¡»é™„å¸¦å¯ç‚¹å‡»çš„è·¯å¾„é“¾æ¥ï¼Œç‚¹å‡»åå¯è·³è½¬è‡³è¯¥æ–‡ä»¶åœ¨å†…æ ¸ä¸­çš„å®Œæ•´ä¸Šä¸‹æ–‡è§†å›¾ã€‚

## 1.3 å¤§æ¨¡å‹è¾…åŠ©æºç æ·±åº¦è§£è¯»éœ€æ±‚

ç³»ç»Ÿåº”åˆ©ç”¨ LLM çš„æ¨ç†èƒ½åŠ›ï¼Œå°†å¤æ‚çš„å†…æ ¸ä»£ç è½¬åŒ–ä¸ºå¯æ„ŸçŸ¥çš„æ•™å­¦ç´ æã€‚

- **ä»£ç è¯­ä¹‰è§£æ„éœ€æ±‚ï¼š**
    - ç³»ç»Ÿåº”è¦æ±‚ LLM å¯¹æ£€ç´¢å‡ºçš„æºç è¿›è¡Œå¤šç»´åº¦åˆ†æï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šå…³é”®å…¨å±€å˜é‡çš„ç”¨é€”ã€åŒæ­¥åŸè¯­ï¼ˆå¦‚ Spinlock, Semaphoreï¼‰çš„åŠ é”é€»è¾‘ã€ä»¥åŠç‰¹å®šç®—æ³•çš„ç©ºé—´ä¸æ—¶é—´å¤æ‚åº¦ã€‚
- **å·¥ç¨‹ç»†èŠ‚æ³¨é‡Šæ ‡å‡†ï¼š**
    - LLM åº”èƒ½è¯†åˆ«å¹¶è§£é‡Šå†…æ ¸å¼€å‘è€…åœ¨ä»£ç ä¸­é‡‡ç”¨çš„ç‰¹æ®Šå·¥ç¨‹æŠ€å·§ï¼Œå¦‚ä¸ºäº†ä¼˜åŒ–å¹¶å‘æ€§èƒ½è€Œé‡‡ç”¨çš„æ— é”è®¾è®¡ã€æˆ–ä¸ºäº†å…¼å®¹ç¡¬ä»¶è€Œè¿›è¡Œçš„æ±‡ç¼–åµŒå…¥ï¼Œä»è€Œæå‡å­¦ç”Ÿçš„å·¥ç¨‹å®è·µå®¡ç¾ã€‚
- **å…¨æ ˆå¼åé¦ˆæœºåˆ¶ï¼š**
    - ç³»ç»Ÿéœ€å®ç°â€œæ•™æ-ä»£ç -è§£é‡Šâ€çš„åŒæ­¥åé¦ˆã€‚åœ¨åŒä¸€äº¤äº’ç•Œé¢å†…ï¼Œç”¨æˆ·åº”èƒ½åŒæ—¶çœ‹åˆ°æ•™æåŸå§‹è¡¨è¿°ã€å¯¹åº”çš„å†…æ ¸ C å®ç°ä»¥åŠ AI çš„ç»¼åˆè§£è¯»ï¼Œå»ºç«‹èµ·åº•å±‚å®ç°ä¸ä¸Šå±‚ç†è®ºçš„å¼ºæ˜ å°„é—­ç¯ã€‚

ä¸ºäº†å½»åº•è§£å†³è¿™ä¸€ç—›ç‚¹ï¼Œæœ¬ç³»ç»Ÿè¢«è®¾è®¡ä¸ºä¸€ä¸ªèƒ½å¤Ÿå®ç°è¯­ä¹‰å¯¹é½ä¸æ™ºèƒ½å¼•å¯¼çš„ç»¼åˆæ•™å­¦ä¸­æ¢ã€‚å­¦ç”Ÿä¸å†éœ€è¦æ‰‹åŠ¨ç¿»é˜…ç›®å½•æˆ–è¿›è¡Œä½æ•ˆçš„å…¨æ–‡æœç´¢ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ä»¥è‡ªç„¶è¯­è¨€çš„å½¢å¼è¾“å…¥è‡ªå·±æ„Ÿåˆ°å›°æƒ‘çš„çŸ¥è¯†ç‚¹ã€‚

# 2. æ•°æ®å‡†å¤‡ä¸é¢„å¤„ç†è¿‡ç¨‹

## **2.1 è¯­æ–™è·å–æ¥æºï¼š**

- æ•™æå†…å®¹ï¼šæ“ä½œç³»ç»ŸåŸç†æ•™ç¨‹ï¼ˆä¸­å›½ç‰ˆæœ¬å›¾ä¹¦é¦†CIPæ•°æ®æ ¸å­—ï¼ˆ2013ï¼‰ç¬¬162557å·ï¼‰
- Linuxå†…æ ¸æºç ï¼š[linux: openKylinæ“ä½œç³»ç»Ÿå†…æ ¸ä»“åº“ - Gitee.com](https://gitee.com/openkylin/linux/tree/linux-6.6-stable/kernel)

## **2.2 æ•°æ®æ¸…æ´—ä¸æ•´åˆï¼š**

æ•°æ®æ˜¯æœ¬ç³»ç»Ÿçš„åº•å±‚ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨è‡ªåŠ¨åŒ–çš„ä»£ç ï¼Œå¹¶ä¸”ç»“åˆå¤§æ¨¡å‹å’Œäººå·¥å®¡æŸ¥æå–æ•°æ®ï¼Œä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼Œå®Œæ•´æ€§ä¸è¯­ä¹‰å¯¹é½ã€‚

### 2.2.1 æ•™æå†…å®¹æå–

**å¤±è´¥å°è¯•ï¼š**æŒ‰ 500 å­—ç¬¦åˆ‡åˆ†ï¼Œå³è¯»å–å…¨éƒ¨çš„æ•™æå†…å®¹ï¼Œæ¯500å­—ç¬¦åˆ‡åˆ†ï¼Œä½œä¸ºä¸€ä¸ªchunkï¼Œè°ƒç”¨embeddingæ¨¡å‹è½¬æ¢ä¸ºè¯­ä¹‰å‘é‡ã€‚è¿™æ ·çš„chunkåˆ‡åˆ†æ–¹å¼æ‰“ç ´äº†æ•™æçš„è¿ç»­æ€§ï¼Œå¦‚æœchunkåˆ‡åˆ†æ­£å¥½åœ¨å…³é”®è¯­å¥çš„ä¸­é—´ï¼Œåˆ™æ£€ç´¢æ•ˆæœä¼šå¤§æ‰“æŠ˜æ‰£ã€‚

**å¤±è´¥åŸå› ï¼š**å› ä¸ºæ•™æ PDF å¾€å¾€å­˜åœ¨å¤æ‚çš„æ’ç‰ˆï¼Œç›´æ¥åˆ‡ç‰‡ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡ä¸¢å¤±ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

1. **é€»è¾‘å±‚çº§è§£æï¼š** ç¼–å†™åŸç”Ÿ Python è„šæœ¬ï¼Œé€šè¿‡è¯†åˆ« PDF çš„å­—ä½“æƒé‡ã€ç¼©è¿›åŠé¡µçœ‰ä¿¡æ¯ï¼Œå°†æ•™æè½¬åŒ–ä¸ºå…·æœ‰çˆ¶å­èŠ‚ç‚¹å…³ç³»çš„ **JSON æ ‘çŠ¶ç»“æ„**ã€‚
2. **ä¸Šä¸‹æ–‡æ³¨å…¥ï¼š** åœ¨è¿›è¡Œæ–‡æœ¬åˆ‡ç‰‡ï¼ˆChunkingï¼‰æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªç‰‡æ®µé™„å¸¦æ‰€å±çš„â€œçˆ¶èŠ‚ç‚¹å…ƒæ•°æ®â€ï¼ˆå¦‚ï¼š*ç¬¬ä¸‰ç«  > å­˜å‚¨ç®¡ç† > æ®µé¡µå¼å­˜å‚¨*ï¼‰ã€‚
3. **ä»·å€¼ä½“ç°ï¼š** è¿™ç§ç»“æ„åŒ–å¤„ç†ç¡®ä¿äº†æ£€ç´¢ç»“æœä¸å†æ˜¯å­¤ç«‹çš„æ–‡å­—ï¼Œè€Œæ˜¯æºå¸¦äº†å®Œæ•´çš„å­¦ç§‘é€»è¾‘ï¼Œæœ‰æ•ˆè§£å†³äº†åˆå­¦è€…å› æ£€ç´¢ç»“æœç¼ºä¹èƒŒæ™¯çŸ¥è¯†è€Œäº§ç”Ÿçš„ç†è§£åå·®ã€‚

### 2.2.2 Linuxå†…æ ¸æºç å†…å®¹æå–

**å¤±è´¥å°è¯•ï¼š**ç›´æ¥å°†Linuxæºç çš„åŸå§‹ C è¯­è¨€æºç è¿›è¡Œå‘é‡åŒ–å¹¶å­˜å…¥å‘é‡æ•°æ®åº“

**å¤±è´¥åŸå› ï¼š**è‡ªç„¶è¯­è¨€å’Œä»£ç è¯­è¨€åœ¨è¯­ä¹‰å‘é‡ç©ºé—´ä¸­çš„è¡¨å¾ä¸ç»Ÿä¸€ï¼Œè‡ªç„¶è¯­è¨€å¯¹åº”çš„ä»£ç å†…å®¹å¯èƒ½ä¸åŸå§‹ä»£ç åœ¨è¯­ä¹‰å‘é‡ç©ºé—´ä¸­çš„è·ç¦»å¾ˆå¤§ï¼Œå¯¼è‡´æ£€ç´¢æ•ˆæœå¾ˆå·®

**è§£å†³æ–¹æ¡ˆï¼šåŒå±‚çº§ä»£ç è§£é‡Šæ˜ å°„æ–¹æ³•**
é’ˆå¯¹ä¸Šè¿°ç—›ç‚¹ï¼Œæˆ‘ä»¬ä¸å†ç›´æ¥æ£€ç´¢â€œä»£ç å‘é‡â€ï¼Œè€Œæ˜¯æ£€ç´¢ç”±å¤§æ¨¡å‹ç”Ÿæˆçš„â€œä»£ç è§£é‡Šå‘é‡â€ã€‚

1. **å‡½æ•°å±‚çº§ï¼ˆFunction-levelï¼‰è§£é‡Šï¼š** è„šæœ¬è‡ªåŠ¨æ‰«æå†…æ ¸ä»£ç ï¼Œè¯†åˆ«å‡ºç‹¬ç«‹çš„å‡½æ•°å—ï¼Œè°ƒç”¨å¤§æ¨¡å‹å¯¹æ¯ä¸ªå‡½æ•°çš„åŠŸèƒ½ã€å‚æ•°æ„ä¹‰ã€å…³é”®å˜é‡è¿›è¡Œæ³¨é‡Šã€‚
2. **æ–‡ä»¶å±‚çº§ï¼ˆFile-levelï¼‰è§£é‡Šï¼š** å¯¹æ•´ä¸ª `.c` æˆ– `.h` æ–‡ä»¶è¿›è¡Œå®è§‚åŠŸèƒ½æ€»ç»“ï¼ˆå¦‚ï¼š*è¯¥æ–‡ä»¶è´Ÿè´£ä¸­æ–­å‘é‡è¡¨çš„åˆå§‹åŒ–*ï¼‰ã€‚
3. **æ£€ç´¢é€»è¾‘é‡æ„ï¼š**
    - **å­˜å‚¨ç«¯ï¼š** çŸ¥è¯†åº“ä¸­å­˜å‚¨çš„æ˜¯ï¼š`[ä»£ç åŸæ–‡æœ¬ | ä»£ç è¯­ä¹‰è§£é‡Š]`ï¼Œå‘é‡åŒ–çš„å¯¹è±¡æ˜¯â€œä»£ç è¯­ä¹‰è§£é‡Šâ€ã€‚
    - **æ£€ç´¢ç«¯ï¼š** å½“å­¦ç”Ÿæé—®æ—¶ï¼Œç³»ç»Ÿåœ¨â€œè§£é‡Šå‘é‡ç©ºé—´â€ä¸­å¯»æ‰¾åŒ¹é…é¡¹ã€‚
4. **æœ€ç»ˆæ•ˆæœï¼š** é€šè¿‡è¿™ç§â€œä»¥æ„é‡Šç â€çš„ç­–ç•¥ï¼Œç³»ç»ŸæˆåŠŸè§£å†³äº†è‡ªç„¶è¯­è¨€ä¸æœºå™¨è¯­è¨€ä¹‹é—´çš„è¯­ä¹‰åç§»çš„é—®é¢˜ï¼Œä½¿æºç æ£€ç´¢çš„å‡†ç¡®ç‡å¾—åˆ°äº†æå‡ã€‚

# 3. ç®—æ³•å¼€å‘ä¸å®éªŒè¿­ä»£

## 3.1 ç³»ç»Ÿå·¥ä½œæµç¨‹è¿­ä»£

åœ¨ç³»ç»Ÿå¼€å‘åˆæœŸï¼Œæˆ‘ä»¬æ„å»ºäº†åŸºç¡€çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰é€»è¾‘ï¼Œä½†åœ¨å®é™…æµ‹è¯•ä¸­å‘ç°äº†è¯­ä¹‰æ¼‚ç§»é—®é¢˜ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬è®¾è®¡å¹¶å®ç°äº†ä¸€å¥—åŸºäº **Workflowï¼ˆå·¥ä½œæµï¼‰** çš„å¤šçº§æ£€ç´¢è¡¥å¿æœºåˆ¶ã€‚

### 3.1.1 ç¦»çº¿æ•°æ®å‡†å¤‡é˜¶æ®µ

ç³»ç»Ÿåº•å±‚çŸ¥è¯†åº“çš„æ„å»ºä¸ä»…æ˜¯æ•°æ®çš„å­˜å‚¨ï¼Œæ›´æ˜¯è¯­ä¹‰çš„æ·±å±‚è¡¨å¾ï¼š

- **æ•™æç»“æ„åŒ–ï¼š** è‡ªåŠ¨åŒ–è„šæœ¬å°†æ•™æè½¬åŒ–ä¸ºå…·æœ‰é€»è¾‘çˆ¶èŠ‚ç‚¹çš„ JSON æ ‘ï¼Œå¹¶è¿›è¡ŒåµŒå…¥ï¼ˆEmbeddingï¼‰ã€‚
- **æºç å¤šçº§è¡¨å¾ï¼š** é’ˆå¯¹æºç ä¸è‡ªç„¶è¯­è¨€çš„æ¨¡æ€å·®å¼‚ï¼Œæˆ‘ä»¬æ”¾å¼ƒäº†ç›´æ¥ç´¢å¼•ä»£ç ï¼Œè€Œæ˜¯æ„å»ºäº†**åŒå±‚è§£é‡Šç´¢å¼•**ï¼š
    - **å‡½æ•°çº§ï¼ˆFunction-levelï¼‰ï¼š** ç”¨Pythonè„šæœ¬è‡ªåŠ¨è¯†åˆ« C å‡½æ•°ï¼Œåˆ©ç”¨ LLM ç”ŸæˆåŠŸèƒ½æ‘˜è¦ï¼Œè§£å†³å±€éƒ¨é€»è¾‘æ£€ç´¢é—®é¢˜ã€‚
    - **æ–‡ä»¶çº§ï¼ˆFile-levelï¼‰ï¼š** é’ˆå¯¹æ•´ä¸ªæºç æ–‡ä»¶ç”Ÿæˆæ¶æ„è¯´æ˜ï¼Œè§£å†³å®è§‚æ¨¡å—æ£€ç´¢é—®é¢˜ã€‚
- **å‘é‡æŒä¹…åŒ–ï¼š** æ‰€æœ‰çš„æ•™æè¯­ä¹‰å‘é‡ä¸æºç è§£é‡Šå‘é‡ç»Ÿä¸€å­˜å…¥chromaé«˜æ€§èƒ½å‘é‡æ•°æ®åº“ã€‚

### 3.1.2 æ—©æœŸæ–¹æ¡ˆåˆ†æ

åŸå§‹æµç¨‹ï¼š ç”¨æˆ·æé—® $\rightarrow$ å‘é‡åŒ– $\rightarrow$ ç›¸ä¼¼åº¦è®¡ç®— $\rightarrow$ Top-K ç»“æœåé¦ˆã€‚

- **å­˜åœ¨çš„é—®é¢˜ï¼š** ç”¨æˆ·çš„æé—®å¾€å¾€å…·æœ‰æ¨¡ç³Šæ€§æˆ–éè§„èŒƒæ€§ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·æé—®â€œå†…å­˜æ€ä¹ˆåˆ†çš„ï¼Ÿâ€ï¼Œç”±äºç¼ºä¹é¢†åŸŸå…³é”®è¯ï¼ˆå¦‚â€œä¼™ä¼´ç³»ç»Ÿâ€ã€â€œSLABâ€ï¼‰ï¼Œå•çº¯çš„å‘é‡åŒ¹é…ï¼ˆCosine Similarityï¼‰ææ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜è§£ï¼Œå¯¼è‡´æ£€ç´¢å‡ºçš„æ•™ææ®µè½ä¸é—®é¢˜å­˜åœ¨åå·®ï¼Œæ— æ³•æ”¯æ’‘åç»­çš„å¤§æ¨¡å‹ç”Ÿæˆã€‚

### 3.1.3 æ ¸å¿ƒåˆ›æ–°ï¼šåŸºäº Workflow çš„æ™ºèƒ½è°ƒåº¦æœºåˆ¶

ä¸ºäº†æ¶ˆé™¤ç”¨æˆ·è¾“å…¥ä¸çŸ¥è¯†åº“è¯­ä¹‰ä¹‹é—´çš„åå·®ï¼Œæˆ‘ä»¬å¼•å…¥äº†å·¥ä½œæµè°ƒåº¦å¼•æ“ï¼Œå°†æ£€ç´¢è¿‡ç¨‹ä»â€œä¸€æ­¥åˆ°ä½â€å‡çº§ä¸ºâ€œå¾ªç¯åé¦ˆâ€ï¼š

**ç¬¬ä¸€é˜¶æ®µï¼šæ„å›¾è§£æ„ä¸å…³é”®è¯æ‰©å±•**

å½“ç³»ç»Ÿæ¥æ”¶åˆ°è¾“å…¥åï¼Œä¸å†ç«‹å³æ£€ç´¢ï¼Œè€Œæ˜¯å…ˆè¿›å…¥**æ„å›¾åˆ†æç¯èŠ‚**ï¼š

- **Query æ‰©å±•ï¼š** è°ƒç”¨å¤§æ¨¡å‹åˆ†æç”¨æˆ·çœŸå®æ„å›¾ï¼Œå°†å…¶æ˜ å°„ä¸º K ä¸ªå­¦æœ¯å…³é”®è¯ï¼ˆä¾‹å¦‚ï¼šå°†â€œå†…å­˜æ€ä¹ˆåˆ†â€æ‰©å±•ä¸ºâ€œLinux å†…æ ¸ã€ä¼™ä¼´ç³»ç»Ÿã€ç‰©ç†é¡µé¢åˆ†é…ã€kmallocâ€ï¼‰ã€‚
- **å¤šè·¯å¬å›ï¼š** å°†è¿™ K ä¸ªå…³é”®è¯åˆ†åˆ«è¿›è¡Œå‘é‡åŒ–ï¼Œåœ¨æ•°æ®åº“ä¸­è¿›è¡Œå¤šè·¯å¹¶è¡Œæ£€ç´¢ï¼Œæå¤§æå‡äº†å¬å›ç‡ï¼ˆRecallï¼‰ã€‚

**ç¬¬äºŒé˜¶æ®µï¼šç›¸å…³æ€§åˆ¤å®šä¸åŠ¨æ€å‰ªæ**

æ£€ç´¢ç³»ç»Ÿè¿”å›åˆæ­¥ç»“æœåï¼Œå¢åŠ äº†ä¸€ä¸ª**éªŒè¯ç¯èŠ‚**ä»¥å‰”é™¤å™ªå£°ï¼š

- **ç›¸å…³æ€§è¯„ä¼°ï¼š** å†æ¬¡è°ƒç”¨å¤§æ¨¡å‹å¯¹â€œç”¨æˆ·åˆå§‹é—®é¢˜â€ä¸â€œæ£€ç´¢åˆ°çš„ç‰‡æ®µâ€è¿›è¡Œé€»è¾‘åŒ¹é…åº¦åˆ†æã€‚
- **ç­–ç•¥æ€§ä¸¢å¼ƒï¼š** å¯¹äºè¯„åˆ†ä½äºé˜ˆå€¼çš„ä¸ç›¸å…³ç‰‡æ®µç›´æ¥ä¸¢å¼ƒï¼Œé¿å…æ— å…³ä¿¡æ¯å¹²æ‰°å¤§æ¨¡å‹çš„æ¨ç†ï¼Œä»è€Œå½»åº•è§£å†³â€œå¹»è§‰â€äº§ç”Ÿçš„æ ¹æºã€‚

**ç¬¬ä¸‰é˜¶æ®µï¼šä¸Šä¸‹æ–‡èåˆä¸æœ€ç»ˆç”Ÿæˆ**

- **ä¸Šä¸‹æ–‡é‡ç»„ï¼š** ç»è¿‡ç­›é€‰åçš„ä¼˜è´¨æ•™æåˆ‡ç‰‡ä¸æºç è§£é‡Šè¢«é€å…¥ Prompt æ¨¡ç‰ˆã€‚
- **åŒé‡åé¦ˆï¼š** ç³»ç»Ÿä¸ä»…è¾“å‡ºå¤§æ¨¡å‹çš„è§£æå›ç­”ï¼ŒåŒæ—¶åœ¨å‰ç«¯åŒæ­¥å±•ç¤ºè¿™äº›è¢«éªŒè¯è¿‡çš„â€œåŸå§‹ä¾æ®â€ï¼ˆæ•™æåŸæ–‡ä¸æºç è·¯å¾„ï¼‰ï¼Œå®ç°çŸ¥è¯†çš„é—­ç¯æ•™å­¦ã€‚

workflowæµç¨‹å›¾ï¼š

![workflow.jpg](workflow.jpg)

å®éªŒéªŒè¯ï¼š

![performance_comparison.png](performance_comparison.png)

## 3.2 Promptè¿­ä»£è¿‡ç¨‹

### 3.2.1 Version 1.0ï¼šåŸºç¡€æ£€ç´¢é—®ç­”

- **Prompt å†…å®¹ï¼š** â€œè¯·æ ¹æ®æä¾›çš„å‚è€ƒèµ„æ–™å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚â€
- **ä¼˜åŒ–é€»è¾‘ï¼š** ä»…ä½œä¸º RAG æ¶æ„çš„åˆæ­¥éªŒè¯ï¼Œæµ‹è¯•æ¨¡å‹æ˜¯å¦èƒ½è¯»å–å¤–éƒ¨å‘é‡æ•°æ®ã€‚
- **å­˜åœ¨é—®é¢˜ï¼š** **å›ç­”æ­»æ¿ï¼š** ä»…ä»…æ˜¯èµ„æ–™çš„â€œå¤è¯»æœºâ€ï¼Œç¼ºä¹é€»è¾‘ç»„ç»‡ã€‚
    - **è§’è‰²ç¼ºå¤±ï¼š** æ¨¡å‹ä¸å…·å¤‡æ“ä½œç³»ç»Ÿä¸“å®¶çš„èº«ä»½æ„Ÿï¼Œå›ç­”é£æ ¼ç±»ä¼¼äºé€šç”¨çš„æœç´¢å¼•æ“æ‘˜è¦ã€‚
    - **æºç å†·è½ï¼š** æ¨¡å‹å€¾å‘äºå›ç­”æ•™ææ–‡å­—ï¼Œå¯¹äºå¤æ‚çš„æºç ç‰‡æ®µå¾€å¾€é‡‡å–è·³è¿‡ç­–ç•¥ã€‚

### 3.2.2 Version 2.0ï¼šè§’è‰²å®šä¹‰ä¸çº¦æŸï¼ˆç»“æ„åŒ–å°è¯•ï¼‰

- **Prompt å†…å®¹ï¼š** â€œä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„æ“ä½œç³»ç»Ÿæ•™å­¦åŠ©æ‰‹ã€‚è¯·æ ¹æ®æ£€ç´¢åˆ°çš„æ•™æåˆ‡ç‰‡å›ç­”é—®é¢˜ï¼Œå¦‚æœæ¶‰åŠæºç ï¼Œè¯·ç®€å•è¯´æ˜ä»£ç æ„å›¾ã€‚â€
- **ä¼˜åŒ–é€»è¾‘ï¼š** å¼•å…¥äº† **Role-Playï¼ˆè§’è‰²æ‰®æ¼”ï¼‰** æœºåˆ¶ï¼Œæ˜ç¡®äº†æ•™å­¦å¯¼å‘ã€‚
- **å­˜åœ¨é—®é¢˜ï¼š** **å¹»è§‰é£é™©ï¼š** åœ¨æ£€ç´¢åˆ°çš„æºç ä¸å……åˆ†æ—¶ï¼Œæ¨¡å‹ä¼šåŸºäºé¢„è®­ç»ƒæƒé‡ç”Ÿé€ å‡½æ•°åã€‚
    - **é€»è¾‘å‰²è£‚ï¼š** æ•™æç†è®ºå’Œæºç å®ç°è¢«åˆ†æˆä¸¤å—é™ˆè¿°ï¼Œæœªèƒ½å®ç°â€œç†è®ºè§£é‡Šä»£ç â€çš„åˆè¡·ã€‚

### 3.2.3 Version 3.0ï¼šä¸‰ç»´åº¦é€»è¾‘å¯¹é½

- **Prompt å†…å®¹ï¼š** â€œä½ æ˜¯ä¸€ä¸ªå†…æ ¸å¼€å‘ä¸“å®¶ã€‚è¯·å°†æä¾›çš„ã€æ•™æå†…å®¹ã€‘ä½œä¸ºç†è®ºèƒŒæ™¯ï¼Œã€æºç ç‰‡æ®µã€‘ä½œä¸ºå®ç°è¯æ®ã€‚åœ¨å›ç­”æ—¶ï¼Œå¿…é¡»å…ˆé˜è¿°ç†è®ºï¼Œå†å¯¹åº”åˆ°å…·ä½“çš„æºç é€»è¾‘ã€‚â€
- **ä¼˜åŒ–é€»è¾‘ï¼š** å¼ºåˆ¶è¦æ±‚æ¨¡å‹å»ºç«‹**â€œç†è®º -> å®ç°â€**çš„æ˜ å°„å…³ç³»ã€‚
- **å­˜åœ¨é—®é¢˜ï¼š** **æº¯æºèƒ½åŠ›å·®ï¼š** ç”¨æˆ·æ— æ³•çŸ¥é“æ¨¡å‹å¼•ç”¨çš„ä»£ç æ¥è‡ªå“ªä¸ªæ–‡ä»¶ã€å“ªä¸€è¡Œã€‚
    - **å¯è§£é‡Šæ€§ä½ï¼š** å¯¹äºåº•å±‚æ±‡ç¼–æˆ–å¤æ‚å®å®šä¹‰ï¼Œæ¨¡å‹è§£é‡Šå¾—è¿‡äºç¬¼ç»Ÿã€‚

### 3.2.4 Version 4.0ï¼šå·¥ç¨‹åŒ–æº¯æºä¸æ ¼å¼åŒ–

- **Prompt å†…å®¹ï¼š** â€œ...åœ¨å¼•ç”¨æºç æ—¶ï¼Œå¿…é¡»æ³¨æ˜ã€æ–‡ä»¶è·¯å¾„ã€‘å’Œã€èµ·å§‹è¡Œå·ã€‘ã€‚å¦‚æœæ£€ç´¢èµ„æ–™ä¸è¶³ä»¥å›ç­”ï¼Œè¯·æ˜ç¡®å‘ŠçŸ¥ï¼Œä¸¥ç¦ç¼–é€ ä»£ç ã€‚â€
- **ä¼˜åŒ–é€»è¾‘ï¼š** å¼•å…¥äº† **Few-Shotï¼ˆå°‘æ ·æœ¬ï¼‰æç¤º** å’Œ **Negative Constraintï¼ˆè´Ÿå‘çº¦æŸï¼‰**ï¼Œæå¤§é™ä½äº†å¹»è§‰ç‡ï¼Œå¹¶å¢å¼ºäº†å­¦æœ¯ä¸¥è°¨æ€§ã€‚
- **å­˜åœ¨é—®é¢˜ï¼š** **æ•™å­¦å¼•å¯¼æ€§ä¸è¶³ï¼š** å›ç­”è¿‡äºæŠ€æœ¯æ‰‹å†ŒåŒ–ï¼Œå¯¹åˆå­¦è€…ä¸å¤Ÿå‹å¥½ã€‚

### 3.2.5 Version 5.0ï¼šæ·±åº¦å¼•å¯¼ä¸å¯¹æ¯”åˆ†æ

- **Prompt å†…å®¹ï¼š** > â€œä½ æ˜¯ä¸€ä½æ·±è€• Linux å†…æ ¸çš„ä¸“å®¶ã€‚è¯·æ‰§è¡Œä»¥ä¸‹ä¸‰æ­¥ä»»åŠ¡ï¼š
    
    > åŸç†è§£æï¼š ä¾æ®æ•™æåˆ‡ç‰‡ï¼Œæç‚¼è¯¥çŸ¥è¯†ç‚¹çš„æ ¸å¿ƒç†è®ºã€‚æºç å®è¯ï¼š ç»“åˆæ£€ç´¢åˆ°çš„æºç è¡Œå·ï¼Œç²¾å‡†æŒ‡å‡ºç†è®ºåœ¨å†…æ ¸ä¸­çš„å…·ä½“æ‰¿è½½å‡½æ•°æˆ–æ•°æ®ç»“æ„ã€‚å¯¹æ¯”åˆ†æï¼š åˆ†ææºç å®ç°ä¸æ•™æç†è®ºçš„å¯¹é½æƒ…å†µï¼ŒæŒ‡å‡ºå†…æ ¸å¼€å‘è€…ä¸ºäº†æ€§èƒ½æˆ–ç¡¬ä»¶å…¼å®¹æ€§åšäº†å“ªäº›ç‰¹æ®Šä¼˜åŒ–ã€‚â€
    > 
- **ä¼˜åŒ–é€»è¾‘ï¼š** é‡‡ç”¨äº† **CoTï¼ˆæ€ç»´é“¾ï¼‰** ç­–ç•¥ï¼Œå¼•å¯¼æ¨¡å‹è¿›è¡Œæ·±åº¦æ€è€ƒã€‚é€šè¿‡â€œå¯¹æ¯”åˆ†æâ€æ­¥éª¤ï¼Œå°†å•çº¯çš„é—®ç­”æå‡åˆ°äº†â€œè®¾è®¡æ€æƒ³æ¢ç©¶â€çš„é«˜åº¦ã€‚
- **æœ€ç»ˆæ•ˆæœï¼š** å›ç­”æ—¢æœ‰ç†è®ºçš„å¹¿åº¦ï¼Œåˆæœ‰æºç çš„æ·±åº¦ã€‚ç³»ç»Ÿèƒ½å‡†ç¡®æŒ‡å‡ºè¯¸å¦‚â€œæ•™ææåˆ°çš„è¿›ç¨‹åˆ‡æ¢é€»è¾‘åœ¨æ˜¯å¦‚ä½•é€šè¿‡æ±‡ç¼–å®ç°çš„â€œç­‰ç»†èŠ‚ã€‚

### 3.2.6è¿­ä»£æ•ˆæœå¯¹æ¯”åˆ†æ

| **ç»´åº¦** | **Version 1.0** | **Version 5.0 (å½“å‰ç‰ˆæœ¬)** |
| --- | --- | --- |
| **çŸ¥è¯†èåˆåº¦** | ç†è®ºä¸ä»£ç å®Œå…¨è„±èŠ‚ | ç†è®ºä¸ä»£ç æ·±åº¦æ˜ å°„ |
| **ä»£ç å‡†ç¡®æ€§** | å­˜åœ¨ä¼ªä»£ç æˆ–å¹»è§‰ | ä¸¥æ ¼éµå¾ªæ£€ç´¢åˆ°çš„è¡Œå·ä¸æ–‡ä»¶ |
| **æ•™å­¦å¯å‘æ€§** | ä»…æä¾›é™ˆè¿°æ€§çŸ¥è¯† | æä¾›è®¾è®¡èƒŒåçš„æƒè¡¡ï¼ˆTrade-offï¼‰åˆ†æ |
| **æº¯æºèƒ½åŠ›** | æ—  | æ”¯æŒæ–‡ä»¶è·¯å¾„ä¸è¡Œå·çš„ç²¾ç¡®è·³ |

# 4. é¢˜åº“ä¸æ™ºèƒ½å‡ºé¢˜

åœ¨æ“ä½œç³»ç»Ÿæ•™å­¦ä¸­ï¼Œä¹ é¢˜æ˜¯æ£€éªŒå­¦ç”Ÿç†è®ºæŒæ¡ç¨‹åº¦çš„æ ¸å¿ƒã€‚ç„¶è€Œï¼Œä¼ ç»Ÿé¢˜åº“é¢ä¸´æ›´æ–°ç¼“æ…¢ã€é¢˜ç›®è§£æç”Ÿç¡¬ç­‰é—®é¢˜ã€‚æœ¬ç³»ç»Ÿé€šè¿‡æ„å»ºâ€œå…ƒé¢˜åº“â€å¹¶ç»“åˆå¤§æ¨¡å‹çš„ç”Ÿæˆèƒ½åŠ›ï¼Œå®ç°äº†æ™ºèƒ½åŒ–çš„å‡ºå·ä¸åˆ¤é¢˜åŠŸèƒ½ã€‚

## 4.1 å…ƒé¢˜åº“ï¼ˆMeta-Question Bankï¼‰çš„æ„å»º

ä¸ºäº†ç¡®ä¿é¢˜ç›®å†…å®¹çš„ä¸¥è°¨æ€§ï¼Œç³»ç»Ÿå¹¶æœªé‡‡ç”¨å¤§æ¨¡å‹å®Œå…¨åŸåˆ›çš„æ–¹å¼ï¼Œè€Œæ˜¯åŸºäºç»å…¸æ•™æå’Œæƒå¨è€ƒç ”èµ„æ–™æ„å»ºäº†â€œå…ƒé¢˜åº“â€ã€‚

- **è¯­æ–™æ”¶é›†**ï¼šä»ã€Šæ“ä½œç³»ç»ŸåŸç†æ•™ç¨‹ã€‹åŠç›¸å…³è€ƒç ”ç²¾é€‰é¢˜é›†ä¸­æå–åŸå§‹é¢˜ç›®ï¼Œæ¶µç›–é€‰æ‹©é¢˜ã€å¡«ç©ºé¢˜ã€ç®€ç­”é¢˜å’Œç»¼åˆåˆ†æé¢˜ã€‚
- **å¤šæ¨¡æ€æ•°æ®å­˜å‚¨**ï¼šè®¾è®¡äº†ä¸“é—¨çš„ JSON å­˜å‚¨æ ¼å¼ã€‚å¯¹äºåŒ…å«é€»è¾‘å›¾ï¼ˆå¦‚ç£ç›˜è°ƒåº¦ç®—æ³•ã€é¡µè¡¨æ˜ å°„å›¾ï¼‰çš„é¢˜ç›®ï¼Œé‡‡ç”¨â€œæ–‡å­—æè¿° + å›¾åºŠé“¾æ¥â€çš„æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œç¡®ä¿å¤§æ¨¡å‹åœ¨å¤„ç†é¢˜ç›®æ—¶èƒ½æ„ŸçŸ¥åˆ°å®Œæ•´çš„ä¸Šä¸‹æ–‡ã€‚
- **çŸ¥è¯†ç‚¹æ ‡ç­¾åŒ–**ï¼šæ¯ä¸€é“é¢˜ç›®å‡è¢«æ‰‹åŠ¨æˆ–åŠè‡ªåŠ¨åœ°æ ‡æ³¨äº†ç»†ç²’åº¦çš„çŸ¥è¯†ç‚¹æ ‡ç­¾ï¼ˆå¦‚ï¼šè¿›ç¨‹åŒæ­¥ã€æ­»é”é¿å…ã€LRU ç®—æ³•ï¼‰ï¼Œä¸ºåç»­çš„æŒ‰éœ€å‡ºé¢˜æä¾›ç´¢å¼•ã€‚

## 4.2 åŸºäºå¤§æ¨¡å‹çš„æ™ºèƒ½å‡ºé¢˜é€»è¾‘

ä¸ºè§£å†³å¤§æ¨¡å‹ç›´æ¥ç”Ÿæˆé¢˜ç›®å¯èƒ½äº§ç”Ÿçš„é€»è¾‘å¹»è§‰ï¼ˆå¦‚ç»™å‡ºé”™è¯¯çš„è®¡ç®—å‚æ•°ï¼‰ï¼Œç³»ç»Ÿé‡‡ç”¨â€œè¯­ä¹‰æ”¹å†™â€ç­–ç•¥ã€‚

- **æ”¹å†™ç­–ç•¥**ï¼šå¤§æ¨¡å‹æ¥æ”¶åˆ°â€œå…ƒé¢˜ç›®â€åï¼Œåœ¨ä¿æŒæ ¸å¿ƒé€»è¾‘å’Œè€ƒç‚¹ä¸å˜çš„å‰æä¸‹ï¼Œä¿®æ”¹é¢˜ç›®èƒŒæ™¯ã€è°ƒæ•´è®¡ç®—æ•°å€¼æˆ–å˜æ¢æé—®è§†è§’ã€‚
- **è´¨é‡æ ¡éªŒæµ**ï¼šæ”¹å†™åçš„é¢˜ç›®ä¼šç»è¿‡å¤§æ¨¡å‹çš„â€œè‡ªæ£€å¾ªç¯â€ï¼ŒéªŒè¯é¢˜ç›®ç­”æ¡ˆçš„å”¯ä¸€æ€§ä¸è§£æçš„é€»è¾‘å‡†ç¡®æ€§ï¼Œä»è€Œå®ç°é«˜å¯é æ€§çš„åŸåˆ›é¢˜ç”Ÿæˆã€‚

## 4.3 æ™ºèƒ½åˆ¤é¢˜ä¸ä¸ªæ€§åŒ–åé¦ˆ

ç³»ç»Ÿä¸ä»…æ”¯æŒå®¢è§‚é¢˜çš„è‡ªåŠ¨å¯¹é”™åˆ¤æ–­ï¼Œæ›´é’ˆå¯¹å¼€æ”¾æ€§ç®€ç­”é¢˜å®ç°äº†æ·±åº¦è§£æã€‚

- **é€»è¾‘æ¯”å¯¹ç®—æ³•**ï¼šåˆ©ç”¨ RAG æ£€ç´¢æ•™æä¸­çš„æ ‡å‡†å®šä¹‰ï¼ŒLLM å°†å­¦ç”Ÿçš„å›ç­”ä¸æ ‡å‡†åˆ‡ç‰‡è¿›è¡Œè¯­ä¹‰ç›¸ä¼¼åº¦æ¯”å¯¹ï¼Œç»™å‡ºå…·ä½“çš„å¾—åˆ†ç‚¹åˆ†æã€‚
- **åå‘å­¦ä¹ å¼•å¯¼**ï¼šå½“å­¦ç”Ÿç­”é”™æ—¶ï¼Œç³»ç»Ÿä¸ä¼šç›´æ¥ç»™å‡ºç­”æ¡ˆï¼Œè€Œæ˜¯è°ƒç”¨â€œå¼•å¯¼ Agentâ€ï¼Œæ ¹æ®å­¦ç”Ÿçš„é”™è¯¯ç‚¹ï¼Œæ£€ç´¢å‡ºå¯¹åº”çš„æ•™æåˆ‡ç‰‡æˆ–å†…æ ¸æºç æ®µè½ï¼Œæç¤ºå­¦ç”Ÿè¿›è¡Œé’ˆå¯¹æ€§å¤ä¹ ã€‚

## 5. å…³é”®é‡Œç¨‹ç¢‘ä¸ä¼šè®®è®°å½•

## 5.1 ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®å¯åŠ¨ä¸æ•™æçŸ¥è¯†åº“æ„å»º (9.23 - 10.12)

### 5.1.1 éœ€æ±‚å®šä¹‰ä¸æ•°æ®æ²»ç† (9.23 - 9.24)

é¡¹ç›®åˆæœŸç¡®ç«‹äº†ä»¥å­¦ç”Ÿç«¯ä¸ºä¸»è¦åº”ç”¨åœºæ™¯ï¼Œæ ¸å¿ƒåŠŸèƒ½æ¶µç›–çŸ¥è¯†ç‚¹äº¤äº’å¯¹è¯ã€åœ¨çº¿ä¹ é¢˜è§£ç­”ï¼Œä»¥åŠæœ€å…·ç‰¹è‰²çš„Linuxæºç å¼•ç”¨ä¸è§£æã€‚

- **è¯­æ–™èµ„æºæ•´åˆ**ï¼šæ•´åˆäº†ä¸­æ–‡æ•™æPDFã€éº’éºŸæ“ä½œç³»ç»ŸæŠ€æœ¯æ–‡æ¡£åŠæºç èµ„æºã€‚
- **æ•™ææ•°å­—åŒ–å·¥ç¨‹**ï¼šé’ˆå¯¹æ•™æPDFçš„ç»“æ„åŒ–éš¾é¢˜ï¼Œå›¢é˜Ÿé‡‡å–äº†â€œé€»è¾‘åˆ‡åˆ†â€ç­–ç•¥ï¼Œå°†å¤§æ–‡ä»¶æŒ‰å†…å®¹æ‹†åˆ†ä¸ºä»¥ç« èŠ‚å‘½åçš„å¾®å‹PDFåŠå…¶çº¯æ–‡æœ¬å¯¹åº”é¡¹ã€‚
- **å›¢é˜Ÿåˆ†å·¥**ï¼š
    - **èƒ¡æ¶µæ¸…**ï¼šè´Ÿè´£1-5ç« çš„æ•°æ®åˆ‡åˆ†ã€çº¯æ–‡æœ¬æå–åŠä¹ é¢˜æ”¶é›†ã€‚
    - **ç§¦æ±Ÿ**ï¼šè´Ÿè´£6-10ç« çš„æ•°æ®åˆ‡åˆ†ï¼Œå¹¶åŒæ­¥å¼€å‘æ”¯æŒæµå¼è¾“å‡ºçš„å¯¹è¯åç«¯ã€‚
    - **è‘£å£®å¿—**ï¼šè´Ÿè´£10-13ç« çš„æ•°æ®åˆ‡åˆ†ï¼Œä¸»å¯¼å…¨å‘˜æ•°æ®çš„å‹ç¼©ä¸æ±‡æ€»ï¼Œå¹¶è®¾è®¡é¢˜åº“çš„JSONå­˜å‚¨æ ¼å¼ï¼ˆå«æ–‡å­—æè¿°ä¸å›¾åºŠé“¾æ¥ï¼‰ã€‚

### 5.1.2 åŸå‹å¼€å‘ä¸å·¥ä½œæµè®¾è®¡ (9.25 - 9.28)

- **åç«¯æ£€ç´¢å¼•æ“**ï¼š**è‘£å£®å¿—**ä¸**èƒ¡æ¶µæ¸…**å…±åŒä½¿ç”¨Embeddingæ¨¡å‹å¯¹åˆ‡ç‰‡ï¼ˆChunkï¼‰è¿›è¡Œå‘é‡åŒ–ï¼Œå®ç°äº†åŸºäºå†…å®¹ç›¸ä¼¼åº¦åŒ¹é…çš„åŸºç¡€æ£€ç´¢æ¨¡å—ã€‚
- **Workflow åˆç‰ˆå®ç°**ï¼š**ç§¦æ±Ÿ**éƒ¨ç½²äº†Qwenå¤§æ¨¡å‹ï¼Œç¡®ç«‹äº†â€œç”¨æˆ·æé—® $\rightarrow$ LLMæ€»ç»“æ£€ç´¢å»ºè®® $\rightarrow$ å‘é‡åŒ¹é…æ£€ç´¢ $\rightarrow$ æ³¨å…¥ä¸Šä¸‹æ–‡ç”Ÿæˆå›ç­”â€çš„åŸºç¡€é—­ç¯å·¥ä½œæµï¼Œå¹¶å®ç°äº†æ— Langchainç‰ˆæœ¬çš„åŸç”Ÿæ¥å…¥ã€‚
- **å‰ç«¯äº¤äº’é€»è¾‘**ï¼š**ç§¦æ±Ÿ**ä¸**èƒ¡æ¶µæ¸…**è´Ÿè´£å¼€å‘ç¬¬ä¸€ç‰ˆå‰ç«¯å¯¹è¯ç•Œé¢ï¼Œæ”¯æŒMarkdownæ ¼å¼å±•ç¤ºåŠPDFæ–‡æ¡£çš„iframeé¢„è§ˆã€‚

### 5.1.3 æ¶æ„è°ƒæ•´ä¸æ™ºèƒ½åŒ–è½¬å‹ (10.2 - 10.12)

- **åŸç”ŸåŒ–è¿ç§»**ï¼šå›¢é˜Ÿå‘ç°LangChainæ¡†æ¶åœ¨æœ¬åœ°æ¨¡å‹ä¸Šçš„Promptæ§åˆ¶åŠ›ä¸è¶³ï¼Œå†³å®šè½¬å‘ç§»é™¤LangChainçš„åŸç”Ÿå®ç°ï¼Œç”±**ç§¦æ±Ÿ**ä¸**è‘£å£®å¿—**ä¸»å¯¼é‡æµ‹æ•ˆæœã€‚
- **ç³»ç»Ÿæ¥å…¥**ï¼š**ç§¦æ±Ÿ**è´Ÿè´£å°†å·¥ä½œæµæ¥å…¥å‰ç«¯ç•Œé¢ï¼Œå¤„ç†å¤šè½®å¯¹è¯çš„å†å²ç®¡ç†ã€‚
- **æ™ºèƒ½å‡ºé¢˜æ¢ç´¢**ï¼š**èƒ¡æ¶µæ¸…**æå‡ºåŸºäºâ€œå…ƒé¢˜åº“â€è¿›è¡Œè¯­ä¹‰æ”¹å†™çš„æ–¹æ¡ˆã€‚**è‘£å£®å¿—**è´Ÿè´£è®¾è®¡ç²¾ç»†åŒ–çš„é¢˜ç›®éš¾åº¦ä¸çŸ¥è¯†ç‚¹è®¾ç½®æ¨¡å¼ã€‚
- **åŸç”ŸåŒ–è¿ç§»**ï¼šå›¢é˜Ÿå‘ç°ç»„ä»¶åº“åœ¨æœ¬åœ°æ¨¡å‹ä¸Šçš„æ§åˆ¶åŠ›ä¸è¶³ï¼Œç”±**ç§¦æ±Ÿ**ä¸**è‘£å£®å¿—**ä¸»å¯¼å½»åº•ç§»é™¤å†—ä½™æ¡†æ¶ï¼Œé‡æµ‹åŸç”ŸPromptçš„å“åº”æ•ˆæœã€‚

## 5.2 ç¬¬äºŒé˜¶æ®µï¼šLinuxå†…æ ¸æºç æ£€ç´¢åŠŸèƒ½ (10.14 - 11.15)

### 5.2.1 æºç å¤„ç†ç®—æ³•ä¸è¯­ä¹‰ç»‘å®š (10.21 - 10.24)

ç”±äºLinuxå†…æ ¸æºç æå…¶åºå¤§ï¼Œç›´æ¥æ£€ç´¢ä»£ç æ–‡æœ¬ä¼šå¯¼è‡´ä¸¥é‡è¯­ä¹‰åç¦»ã€‚å›¢é˜Ÿæå‡ºäº†â€œä¸‰å±æ€§å®ä½“â€æ¨¡å‹ã€‚

- **è¯­æ³•æ„ŸçŸ¥åˆ‡ç‰‡**ï¼š**è‘£å£®å¿—**å®ç°äº†æºç çš„è‡ªåŠ¨åŒ–åˆ†å—ï¼Œå°†æ–‡ä»¶åˆ†ä¸ºå®šä¹‰åŒºï¼ˆå¤´æ–‡ä»¶ï¼‰ä¸ä¸»ä½“ï¼Œä¸»ä½“æ¯100è¡Œå·¦å³åˆ‡ä¸ºä¸€ä¸ªChunkï¼Œç¡®ä¿ä¸ç ´åå‡½æ•°å®Œæ•´æ€§ã€‚
- **ä»¥æ„é‡Šç **ï¼š**ç§¦æ±Ÿ**è°ƒç”¨å¤§æ¨¡å‹ä¸ºæ¯ä¸ªæºç Chunkç”Ÿæˆè‡ªç„¶è¯­è¨€æè¿°ã€‚æ£€ç´¢ç³»ç»Ÿå®é™…æ£€ç´¢çš„æ˜¯â€œæè¿°å‘é‡â€ï¼Œéšåå…³è”å¹¶å±•ç¤ºå¯¹åº”çš„â€œåŸå§‹ä»£ç â€ã€‚
- **å·¥ç¨‹ç»†èŠ‚**ï¼š**èƒ¡æ¶µæ¸…**è´Ÿè´£å»ºç«‹å‘é‡æ•°æ®åº“ï¼Œå¹¶å¼€å§‹åŸºäº`kernel/`æ–‡ä»¶å¤¹è¿›è¡Œé¦–è½®æ£€ç´¢æµ‹è¯•ã€‚

### 5.2.2 æ£€ç´¢æµç¨‹ä¼˜åŒ–ä¸äºŒæ®µå¼è¿‡æ»¤ (10.28 - 11.8)

- **åŒå±‚ç´¢å¼•ç­–ç•¥**ï¼š**è‘£å£®å¿—**æå‡ºå…ˆæ£€ç´¢æ–‡ä»¶çº§æ€»ç»“ï¼ˆ.mdï¼‰ï¼Œé”å®šæœ€ç›¸å…³çš„3ä¸ªæ–‡ä»¶åï¼Œå†åœ¨è¿™äº›æ–‡ä»¶ä¸­æ£€ç´¢Top-5çš„Chunkï¼Œæ˜¾è‘—æå‡äº†æ£€ç´¢ç²¾å‡†åº¦ã€‚
- **ç¯å¢ƒéƒ¨ç½²**ï¼š**èƒ¡æ¶µæ¸…**é…ç½®äº†æœåŠ¡å™¨ï¼Œå®Œæˆäº†å…¨é‡æ•°æ®æ¬è¿ä¸æ£€ç´¢å¼•æ“çš„çº¿ä¸ŠåŒ–æµ‹è¯•ã€‚
- **UI å‡çº§**ï¼šå‰ç«¯å¢åŠ äº†ä»£ç æ£€ç´¢å¼€å…³ï¼Œå¹¶æ”¯æŒæºä»£ç ä¸åŒåMarkdownæè¿°æ–‡ä»¶çš„å¹¶æ’å±•ç¤º

### 5.2.3 æºç å»ºè®®Agentä¸æ¥å…¥ (11.10 - 11.15)

- **å»ºè®®Agentæ„å»º**ï¼šæ„å»ºäº†ä¸“é—¨äº§ç”Ÿæºç æœç´¢å…³é”®è¯ï¼ˆsuggest_queryï¼‰çš„Agentï¼Œèƒ½å¤Ÿç»“åˆå¯¹è¯å†å²åŠ¨æ€ä¼˜åŒ–å…³é”®è¯ç”Ÿæˆã€‚
- **è¾“å‡ºä¼˜åŒ–**ï¼šå›¢é˜Ÿå¼€å§‹ä¼˜åŒ–ä»£ç æè¿°éƒ¨åˆ†çš„å±•ç¤ºå¸ƒå±€ï¼Œå‹ç¼©å†—ä½™ä¿¡æ¯ï¼Œæå‡ç¾è§‚åº¦ã€‚

## 5.3 ç¬¬ä¸‰é˜¶æ®µï¼šAgentå·¥ä½œæµæ·±åŒ–ä¸ç³»ç»Ÿçº§æ•´åˆ (11.20 - 12.20)

### 5.3.1 ä»£ç é—®ç­”å·¥ä½œæµå‡çº§ (11.20 - 12.10)

- **ä»â€œæ£€ç´¢â€åˆ°â€œé—®ç­”â€**ï¼š**è‘£å£®å¿—**æå‡ºå°†æ£€ç´¢åˆ°çš„ä»£ç ä½œä¸ºLLMç”Ÿæˆçš„å¤–éƒ¨èƒŒæ™¯çŸ¥è¯†ï¼Œè§£å†³â€œæ¨¡å‹åªç”¨çŸ¥è¯†åº“ä¸çœ‹ä»£ç â€çš„é—®é¢˜ã€‚
- **Workflow é‡æ„**ï¼š**ç§¦æ±Ÿ**å®ç°äº†æ–°çš„å·¥ä½œæµï¼Œä½¿Agent Queryç”Ÿæˆæ—¶èƒ½å‚è€ƒä¹‹å‰çš„æ£€ç´¢å†…å®¹ã€‚
- **ç³»ç»Ÿä¼˜åŒ–**ï¼š**è‘£å£®å¿—**ä¸»å¯¼äº†é¡¹ç›®æ›´ååŠç•Œé¢å»å†—ä½™å·¥ä½œï¼ˆç§»é™¤æ—§ç™»å½•ç•Œé¢ï¼‰ï¼Œä½¿ç³»ç»Ÿå®Œå…¨é’ˆå¯¹æ•™æåœºæ™¯é€‚é…ã€‚

### 5.3.2 å†…å­˜ç®¡ç† (mm/) å­ç³»ç»Ÿæ·±åº¦è§£æ„ (12.10 - 12.13)

- **è¯­ä¹‰å±‚çº§å¯¹é½**ï¼š**ç§¦æ±Ÿ**å®Œæˆäº†é’ˆå¯¹`/mm`æ–‡ä»¶å¤¹çš„æ–‡ä»¶çº§è¯­ä¹‰ç†è§£ï¼›**è‘£å£®å¿—**è´Ÿè´£ç¼–å†™å¹¶è¿è¡Œè„šæœ¬ï¼Œå®Œæˆäº†å†…å­˜ç®¡ç†éƒ¨åˆ†çš„å‡½æ•°çº§Chunkè§£æã€‚
- **åæ€é€»è¾‘å®ç°**ï¼š**ç§¦æ±Ÿ**å®ç°äº†â€œæ•™ææ£€ç´¢ $\rightarrow$ åæ€è¯„åˆ† $\rightarrow$ å†æ£€ç´¢â€çš„è¿­ä»£å¼RAGæµç¨‹ã€‚
- **ç³»ç»Ÿè¯„æµ‹**ï¼š**èƒ¡æ¶µæ¸…**è´Ÿè´£å¯¹æ•´åˆäº†æ–°Workflowå’Œ`mm/`å†…å®¹çš„ç³»ç»Ÿè¿›è¡Œç«¯åˆ°ç«¯æ€§èƒ½è¯„æµ‹ã€‚

### 5.3.3 é¡¹ç›®å®Œæˆ(12.20)

- **ç°çŠ¶æ€»ç»“**ï¼šç›®å‰ä»£ç RAGæ£€ç´¢å·²å…¨é¢å®ç°ï¼Œå¹¶å®Œæ•´æ•´åˆäº†å†…å­˜ç®¡ç†ï¼ˆmm/ï¼‰çš„å†…å®¹ã€‚

## 5.4. æˆå‘˜è´¡çŒ®æ˜ç»†è¡¨

| **æˆå‘˜** | **æ ¸å¿ƒèŒè´£** | **é˜¶æ®µæ€§æˆæœ** |
| --- | --- | --- |
| **ç§¦æ±Ÿ** | åç«¯ç®—æ³•ä¸Workflow | Qwenæ¨¡å‹éƒ¨ç½²ã€åŸç”ŸWorkflowå¼€å‘ã€`/mm`æ–‡ä»¶çº§è¯­ä¹‰åˆ†æ |
| **è‘£å£®å¿—** | æ•°æ®ç­–ç•¥ä¸æ¶æ„ä¼˜åŒ– | æºç Chunkingç®—æ³•è®¾è®¡ã€äºŒæ®µå¼æ£€ç´¢ç­–ç•¥ã€ä»£ç é—®ç­”é€»è¾‘å‡çº§ |
| **èƒ¡æ¶µæ¸…** | æ£€ç´¢æµ‹è¯•ä¸æœåŠ¡å™¨æ„å»º | å‘é‡åº“å»ºç«‹ã€æ ¡å¤–æœåŠ¡å™¨éƒ¨ç½²ã€å…ƒé¢˜åº“æ™ºèƒ½æ”¹å†™ã€ç³»ç»Ÿç«¯åˆ°ç«¯è¯„æµ‹ |

# 6. é¡¹ç›®æºç 

## 6.1 é¡¹ç›®ä»£ç 

> [CSç³•æ‰‹ / OS2025-RecomMind Â· GitLab](https://gitlab.eduxiji.net/T202510007998089/project3035750-358021)
> 

é¡¹ç›®ä»£ç å¯ä»¥é€šè¿‡ä¸Šè¿°é“¾æ¥æŸ¥çœ‹

## 6.2 é¡¹ç›®ç›¸å…³æ–‡æ¡£

### 6.2.1 åç«¯APIæ–‡æ¡£

åŒ…æ‹¬åç«¯apiçš„ä½¿ç”¨æ–¹æ³•ä¸æ¥å£è°ƒç”¨

```markdown
# åç«¯APIæ–‡æ¡£

## ğŸ“‹ APIæ¥å£åˆ—è¡¨

### 1. å¥åº·æ£€æŸ¥

**æ¥å£**: `GET /api/health`

**æè¿°**: æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼ŒåŒ…æ‹¬æ•™æRAGå’Œæºç æ£€ç´¢å·¥ä½œæµçš„çŠ¶æ€

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æœåŠ¡æ­£å¸¸",
  "data": {
    "rag_workflow": "healthy",
    "code_rag_workflow": "healthy",
    "overall": "healthy"
  },
  "timestamp": "2024-11-14T15:50:00"
}
```

---

### 2. èŠå¤©æ¥å£ï¼ˆæ”¯æŒæ•™æå’Œæºç æ£€ç´¢ï¼‰

**æ¥å£**: `POST /api/chat`

**æè¿°**: ç»Ÿä¸€çš„èŠå¤©æ¥å£ï¼Œæ”¯æŒæ•™ææ£€ç´¢å’Œæºç æ£€ç´¢ï¼ˆå¯åŒæ—¶å¯ç”¨ï¼‰

**è¯·æ±‚ä½“**:
```json
{
  "userInput": "ç”¨æˆ·é—®é¢˜",
  "useRag": true,          // æ˜¯å¦å¯ç”¨æ•™ææ£€ç´¢
  "useCodeRetrieval": true // æ˜¯å¦å¯ç”¨æºç æ£€ç´¢
}
```

**å“åº”**: SSE (Server-Sent Events) æµå¼å“åº”

**äº‹ä»¶ç±»å‹**:
- `retrieval`: æ•™ææ£€ç´¢ç»“æœ
- `code_retrieval`: æºç æ£€ç´¢ç»“æœ
- `answer_chunk`: å›ç­”ç‰‡æ®µï¼ˆæµå¼è¾“å‡ºï¼‰
- `code_description_chunk`: ä»£ç æè¿°ç‰‡æ®µï¼ˆæµå¼è¾“å‡ºï¼‰
- `[DONE]`: å®Œæˆæ ‡è®°

**ç¤ºä¾‹å“åº”**:
```
data: {"documents": [...], "thought": "..."}

data: {"codes": [{"path": "kernel/acct.c", "startLine": 544, "endLine": 644, "description": "..."}]}

data: {"answer_chunk": "è¿™æ˜¯å›ç­”çš„ç¬¬ä¸€éƒ¨åˆ†..."}

data: {"answer_chunk": "è¿™æ˜¯å›ç­”çš„ç¬¬äºŒéƒ¨åˆ†..."}

data: [DONE]
```

---

### 3. æºç æ£€ç´¢ä¸“ç”¨æ¥å£

**æ¥å£**: `POST /api/code/query`

**æè¿°**: ä»…è¿›è¡Œæºç æ£€ç´¢ï¼Œä¸åŒ…å«æ•™ææ£€ç´¢

**è¯·æ±‚ä½“**:
```json
{
  "userInput": "Linux å¦‚ä½•å®ç°è¿›ç¨‹è®°è´¦"
}
```

**å“åº”**: SSE æµå¼å“åº”

**äº‹ä»¶ç±»å‹**:
- `code_retrieval`: æºç æ£€ç´¢ç»“æœï¼ˆåŒ…å«ä»£ç å¼•ç”¨ï¼‰
- `code_description_chunk`: ä»£ç æè¿°ç‰‡æ®µï¼ˆæµå¼è¾“å‡ºï¼‰
- `[DONE]`: å®Œæˆæ ‡è®°

**ç¤ºä¾‹å“åº”**:
```
data: {"codes": [...], "thought": "..."}

data: {"answer_chunk": "ä»£ç æè¿°..."}

data: [DONE]
```

---

### 4. æ¸…ç©ºå¯¹è¯å†å²

**æ¥å£**: `POST /api/conversation/clear`

**æè¿°**: æ¸…ç©ºæ•™ææ£€ç´¢å’Œæºç æ£€ç´¢çš„å¯¹è¯å†å²

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "å¯¹è¯å†å²æ¸…ç©ºæˆåŠŸ",
  "data": {
    "cleared": ["æ•™ææ£€ç´¢", "æºç æ£€ç´¢"]
  }
}
```

---

### 5. æ¸…ç©ºæºç æ£€ç´¢å¯¹è¯å†å²

**æ¥å£**: `POST /api/code/conversation/clear`

**æè¿°**: ä»…æ¸…ç©ºæºç æ£€ç´¢çš„å¯¹è¯å†å²

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æºç æ£€ç´¢å¯¹è¯å†å²æ¸…ç©ºæˆåŠŸ"
}
```

---

### 6. è·å–å¯¹è¯æ‘˜è¦

**æ¥å£**: `GET /api/conversation/summary`

**æè¿°**: è·å–æ•™ææ£€ç´¢çš„å¯¹è¯æ‘˜è¦

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–å¯¹è¯æ‘˜è¦æˆåŠŸ",
  "data": {
    "summary": "å¯¹è¯æ¶ˆæ¯æ•°: 5"
  }
}
```

---

### 7. æ›´æ–°ç›¸ä¼¼åº¦é˜ˆå€¼

**æ¥å£**: `POST /api/config/similarity-threshold`

**æè¿°**: æ›´æ–°æ•™ææ£€ç´¢çš„ç›¸ä¼¼åº¦é˜ˆå€¼

**è¯·æ±‚ä½“**:
```json
{
  "threshold": 0.3
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "ç›¸ä¼¼åº¦é˜ˆå€¼æ›´æ–°æˆåŠŸ",
  "data": {
    "threshold": 0.3
  }
}
```

---

### 8. è·å–æ•™æRAGç³»ç»Ÿä¿¡æ¯

**æ¥å£**: `GET /api/rag/info`

**æè¿°**: è·å–æ•™æRAGç³»ç»Ÿçš„è¯¦ç»†ä¿¡æ¯

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–RAGä¿¡æ¯æˆåŠŸ",
  "data": {
    "collection_info": {
      "collection_name": "textbook_content",
      "document_count": 195
    },
    "similarity_threshold": 0.0,
    "conversation_count": 5,
    "llm_path": "...",
    "embedding_model_path": "..."
  }
}
```

---

### 9. è·å–æºç æ£€ç´¢ç³»ç»Ÿä¿¡æ¯

**æ¥å£**: `GET /api/code/info`

**æè¿°**: è·å–æºç æ£€ç´¢ç³»ç»Ÿçš„è¯¦ç»†ä¿¡æ¯

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æºç æ£€ç´¢ä¿¡æ¯æˆåŠŸ",
  "data": {
    "code_rag_engine": {
      "collection_name": "source_code",
      "document_count": 0
    },
    "dzz_collection": {
      "collection_name": "kernel_file_summaries",
      "document_count": 487
    },
    "similarity_threshold": 0.0,
    "conversation_count": 3,
    "llm_path": "...",
    "chroma_md_path": "./dzz_retrieval/chroma_md",
    "top_files": 3,
    "top_chunks": 5
  }
}
```

---

## ğŸ“ æ•°æ®æ¨¡å‹

### CodeReferenceï¼ˆä»£ç å¼•ç”¨ï¼‰

```typescript
interface CodeReference {
  path: string;           // æ–‡ä»¶è·¯å¾„ï¼Œå¦‚ "kernel/acct.c"
  startLine: number;      // èµ·å§‹è¡Œå·
  endLine: number;        // ç»“æŸè¡Œå·
  description?: string;    // ä»£ç æè¿°ï¼ˆå¯é€‰ï¼‰
}
```

### ChatRequestï¼ˆèŠå¤©è¯·æ±‚ï¼‰

```typescript
interface ChatRequest {
  userInput: string;      // ç”¨æˆ·è¾“å…¥
  useRag: boolean;         // æ˜¯å¦å¯ç”¨æ•™ææ£€ç´¢
  useCodeRetrieval: boolean; // æ˜¯å¦å¯ç”¨æºç æ£€ç´¢
}
```

### ChatResponseï¼ˆèŠå¤©å“åº”ï¼‰

```typescript
interface ChatResponse {
  thought: string;         // AIæ€è€ƒè¿‡ç¨‹
  answer: string;          // AIå›ç­”
  documents: RetrievedDocument[]; // æ•™ææ–‡æ¡£å¼•ç”¨
  codes?: CodeReference[]; // ä»£ç å¼•ç”¨ï¼ˆå¯é€‰ï¼‰
}
```

---

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### Python ç¤ºä¾‹

```python
import requests

# 1. å¥åº·æ£€æŸ¥
response = requests.get("http://localhost:5000/api/health")
print(response.json())

# 2. æºç æ£€ç´¢æŸ¥è¯¢
payload = {
    "userInput": "Linux å¦‚ä½•å®ç°è¿›ç¨‹è®°è´¦"
}

response = requests.post(
    "http://localhost:5000/api/code/query",
    json=payload,
    stream=True
)

for line in response.iter_lines():
    if line:
        line_str = line.decode('utf-8')
        if line_str.startswith('data: '):
            data_str = line_str[6:]
            if data_str != '[DONE]':
                data = json.loads(data_str)
                print(data)
```

### JavaScript ç¤ºä¾‹

```javascript
// ä½¿ç”¨ EventSource æ¥æ”¶ SSE æµ
const eventSource = new EventSource('http://localhost:5000/api/code/query', {
  method: 'POST',
  body: JSON.stringify({
    userInput: 'Linux å¦‚ä½•å®ç°è¿›ç¨‹è®°è´¦'
  })
});

eventSource.onmessage = (event) => {
  const data = JSON.parse(event.data);
  if (data.codes) {
    console.log('ä»£ç å¼•ç”¨:', data.codes);
  }
  if (data.answer_chunk) {
    console.log('å›ç­”ç‰‡æ®µ:', data.answer_chunk);
  }
};
```

---

## ğŸš€ å¯åŠ¨åç«¯æœåŠ¡å™¨

```bash
cd /home/ubuntu/qj_temp/workflow_wxk
python3 backend_server.py
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:5000` å¯åŠ¨ã€‚

---

## âœ… æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
python3 test_backend_api.py
```

æµ‹è¯•åŒ…æ‹¬ï¼š
- å¥åº·æ£€æŸ¥
- æºç æ£€ç´¢ç³»ç»Ÿä¿¡æ¯
- æºç æ£€ç´¢æŸ¥è¯¢
- æ¸…ç©ºå¯¹è¯å†å²

```

### 6.2.1 åç«¯é›†æˆæ€»ç»“

```markdown
# åç«¯é›†æˆæ€»ç»“

## âœ… å·²å®Œæˆ

### 1. æ­¥éª¤3ä¼˜åŒ–é›†æˆ

**ä¿®æ”¹å†…å®¹**ï¼š
- æ­¥éª¤3ä¸å†ä½¿ç”¨LLMç”Ÿæˆä»£ç æè¿°
- ç›´æ¥ä½¿ç”¨é¢„å¤„ç†å¥½çš„æè¿°ï¼š
  - æ–‡ä»¶çº§æ‘˜è¦ï¼šä» `chroma_md` è·å–
  - ä»£ç å—çº§æè¿°ï¼šä» `kernel_chunks_with_descriptions.json` è·å–

**æ€§èƒ½æå‡**ï¼š
- é€Ÿåº¦æå‡ï¼š30-60å€ï¼ˆä»30-60ç§’é™è‡³<1ç§’ï¼‰
- æ— éœ€è°ƒç”¨LLMï¼ŒèŠ‚çœGPUèµ„æº
- ä½¿ç”¨ç¨³å®šçš„é¢„å¤„ç†æè¿°

### 2. åç«¯ä»£ç æ›´æ–°

**æ›´æ–°çš„æ¥å£**ï¼š

1. **`/api/chat`** - èŠå¤©æ¥å£
   - æ”¯æŒåŒæ—¶å¯ç”¨æ•™ææ£€ç´¢å’Œæºç æ£€ç´¢
   - æ­£ç¡®å¤„ç† `code_retrieval` å’Œ `code_description_chunk` äº‹ä»¶
   - æ›´æ–°äº† thought æ¶ˆæ¯ï¼Œåæ˜ æ–°çš„æµç¨‹

2. **`/api/code/query`** - æºç æ£€ç´¢ä¸“ç”¨æ¥å£
   - ä»…è¿›è¡Œæºç æ£€ç´¢ï¼Œä¸åŒ…å«æ•™ææ£€ç´¢
   - æ­£ç¡®å¤„ç†é¢„å¤„ç†å¥½çš„ä»£ç æè¿°æµå¼è¾“å‡º
   - æ›´æ–°äº† thought æ¶ˆæ¯

### 3. äº‹ä»¶æµå¤„ç†

**æ”¯æŒçš„äº‹ä»¶ç±»å‹**ï¼š
- `code_retrieval`: æºç æ£€ç´¢ç»“æœï¼ˆåŒ…å«ä»£ç å¼•ç”¨ï¼‰
- `code_description_chunk`: ä»£ç æè¿°ç‰‡æ®µï¼ˆæµå¼è¾“å‡ºï¼‰
- `code_done`: å®Œæˆæ ‡è®°

**å¤„ç†æµç¨‹**ï¼š
```
æ­¥éª¤2: æ‰§è¡Œæºç å‘é‡æ£€ç´¢
  â”œâ”€ å‘é€ code_retrieval äº‹ä»¶ï¼ˆåŒ…å«ä»£ç å¼•ç”¨ï¼‰
  â””â”€ å­˜å‚¨æ–‡ä»¶æ‘˜è¦åˆ° _retrieved_file_summaries
    â†“
æ­¥éª¤3: ç»„è£…é¢„å¤„ç†å¥½çš„ä»£ç æè¿°
  â”œâ”€ ä» _retrieved_file_summaries è·å–æ–‡ä»¶æ‘˜è¦
  â”œâ”€ ä» metadata['description'] è·å–ä»£ç å—æè¿°
  â””â”€ æµå¼å‘é€ code_description_chunk äº‹ä»¶
    â†“
åç«¯æ¥æ”¶å¹¶è½¬å‘ç»™å‰ç«¯
```

### 4. Thought æ¶ˆæ¯æ›´æ–°

**æ›´æ–°å‰**ï¼š
```
"æˆ‘é€šè¿‡æºç æ£€ç´¢æ‰¾åˆ°äº†Xä¸ªç›¸å…³ä»£ç ç‰‡æ®µï¼ŒåŸºäºè¿™äº›ä¿¡æ¯ç”Ÿæˆäº†å›ç­”ã€‚"
```

**æ›´æ–°å**ï¼š
```
"æˆ‘é€šè¿‡æºç æ£€ç´¢æ‰¾åˆ°äº†Xä¸ªç›¸å…³ä»£ç ç‰‡æ®µï¼Œæ­£åœ¨ç»„è£…é¢„å¤„ç†å¥½çš„ä»£ç æè¿°ï¼ˆæ–‡ä»¶æ‘˜è¦å’Œä»£ç å—è¯´æ˜ï¼‰ã€‚"
```

## ğŸ“Š å·¥ä½œæµç¨‹

### å®Œæ•´æµç¨‹

```
ç”¨æˆ·æŸ¥è¯¢
    â†“
æ­¥éª¤1: ç”Ÿæˆæºç æ£€ç´¢å»ºè®®
    â†“
æ­¥éª¤2: ä¸¤é˜¶æ®µæ£€ç´¢
    â”œâ”€ é˜¶æ®µ1: æ–‡ä»¶çº§æ£€ç´¢ï¼ˆè·å–æ–‡ä»¶æ‘˜è¦ï¼‰
    â””â”€ é˜¶æ®µ2: ä»£ç å—çº§æ£€ç´¢ï¼ˆè·å–ä»£ç å—+æè¿°ï¼‰
    â†“
æ­¥éª¤3: ç»„è£…é¢„å¤„ç†å¥½çš„æè¿°ï¼ˆä¸å†ä½¿ç”¨LLMï¼‰
    â”œâ”€ æ–‡ä»¶æ‘˜è¦ï¼ˆä»æ­¥éª¤2è·å–ï¼‰
    â””â”€ ä»£ç å—æè¿°ï¼ˆä»metadataè·å–ï¼‰
    â†“
åç«¯æµå¼è¾“å‡º
    â”œâ”€ code_retrieval äº‹ä»¶ï¼ˆä»£ç å¼•ç”¨ï¼‰
    â””â”€ code_description_chunk äº‹ä»¶ï¼ˆæè¿°å†…å®¹ï¼‰
    â†“
å‰ç«¯å±•ç¤º
```

## ğŸ”§ é…ç½®

### åç«¯åˆå§‹åŒ–é…ç½®

```python
code_config = {
    "llm_path": "...",
    "embedding_model_path": "...",
    "db_path": "./vector_db",
    "similarity_threshold": 0.0,
    "chroma_md_path": "./dzz_retrieval/chroma_md",  # dzz æ£€ç´¢ç³»ç»Ÿ
    "top_files": 3,      # æ–‡ä»¶çº§æ£€ç´¢æ•°é‡
    "top_chunks": 5      # ä»£ç å—çº§æ£€ç´¢æ•°é‡
}
```

## âœ… éªŒè¯

### æµ‹è¯•ç»“æœ

1. âœ… è¯­æ³•æ£€æŸ¥é€šè¿‡
2. âœ… äº‹ä»¶å¤„ç†é€»è¾‘æ­£ç¡®
3. âœ… é¢„å¤„ç†æè¿°æ­£ç¡®ç»„è£…
4. âœ… æµå¼è¾“å‡ºæ­£å¸¸å·¥ä½œ

### æµ‹è¯•è„šæœ¬

- `test_dzz_retrieval_only.py` - æ£€ç´¢ç³»ç»Ÿæµ‹è¯•
- `test_dzz_retrieval_integration.py` - å®Œæ•´æµç¨‹æµ‹è¯•
- `test_step3_description.py` - æ­¥éª¤3æè¿°ç»„è£…æµ‹è¯•

## ğŸš€ ä½¿ç”¨

### å¯åŠ¨åç«¯

```bash
cd /home/ubuntu/qj_temp/workflow_wxk
python3 backend_server.py
```

### APIè°ƒç”¨ç¤ºä¾‹

```python
import requests

# æºç æ£€ç´¢æŸ¥è¯¢
response = requests.post(
    "http://localhost:5000/api/code/query",
    json={"userInput": "Linux å¦‚ä½•å®ç°è¿›ç¨‹è®°è´¦"},
    stream=True
)

for line in response.iter_lines():
    if line:
        data = json.loads(line.decode('utf-8')[6:])  # ç§»é™¤ "data: " å‰ç¼€
        if 'codes' in data:
            print("ä»£ç å¼•ç”¨:", data['codes'])
        if 'answer_chunk' in data:
            print("æè¿°ç‰‡æ®µ:", data['answer_chunk'])
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **LLMæ¨¡å‹ä»ç„¶åŠ è½½**ï¼šè™½ç„¶æ­¥éª¤3ä¸å†ä½¿ç”¨LLMï¼Œä½†æ¨¡å‹ä»ç„¶ä¼šåœ¨åˆå§‹åŒ–æ—¶åŠ è½½ï¼ˆç”¨äºæ­¥éª¤1çš„æ£€ç´¢å»ºè®®ç”Ÿæˆï¼‰ã€‚å¦‚æœéœ€è¦å®Œå…¨ç§»é™¤LLMï¼Œéœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚

2. **æ–‡ä»¶æ‘˜è¦å­˜å‚¨**ï¼šæ–‡ä»¶æ‘˜è¦å­˜å‚¨åœ¨ `_retrieved_file_summaries` å®ä¾‹å˜é‡ä¸­ï¼Œåœ¨æ¯æ¬¡æ£€ç´¢æ—¶æ›´æ–°ã€‚

3. **æè¿°æ ¼å¼**ï¼šé¢„å¤„ç†å¥½çš„æè¿°å·²ç»æ˜¯Markdownæ ¼å¼ï¼Œç›´æ¥ç»„è£…å³å¯ã€‚

## ğŸ‰ æ€»ç»“

åç«¯å·²æˆåŠŸé›†æˆæ–°çš„æ­¥éª¤3ä¼˜åŒ–ï¼š
- âœ… ä½¿ç”¨é¢„å¤„ç†å¥½çš„æè¿°ï¼Œä¸å†è°ƒç”¨LLM
- âœ… æ€§èƒ½å¤§å¹…æå‡ï¼ˆ30-60å€ï¼‰
- âœ… ä»£ç è´¨é‡ç¨³å®š
- âœ… æµå¼è¾“å‡ºæ­£å¸¸å·¥ä½œ
- âœ… å‰ç«¯å…¼å®¹æ€§ä¿æŒ

ç³»ç»Ÿå·²å‡†å¤‡å¥½ç”¨äºç”Ÿäº§ç¯å¢ƒï¼

```

### 6.2.3 æ£€ç´¢ç³»ç»Ÿé›†æˆè¯´æ˜

```markdown
# dzz æ£€ç´¢ç³»ç»Ÿé›†æˆè¯´æ˜

## âœ… é›†æˆå®Œæˆ

å·²æˆåŠŸå°† dzz é¡¹ç›®çš„ä¸¤é˜¶æ®µæ£€ç´¢é€»è¾‘é›†æˆåˆ° `CodeRAGWorkflow` çš„ç¬¬äºŒæ­¥æ£€ç´¢éƒ¨åˆ†ã€‚

## ğŸ“‹ ä¿®æ”¹å†…å®¹

### 1. å¯¼å…¥æ¨¡å— (`simple_rag_workflow.py`)
- æ·»åŠ äº† `rank_chunks_by_semantic` æ¨¡å—çš„å¯¼å…¥é€»è¾‘
- æ”¯æŒè‡ªåŠ¨è·¯å¾„æ£€æµ‹å’Œé”™è¯¯å¤„ç†

### 2. `CodeRAGWorkflow.__init__` æ–¹æ³•
æ–°å¢å‚æ•°ï¼š
- `chroma_md_path`: dzz æ£€ç´¢ç³»ç»Ÿçš„ ChromaDB è·¯å¾„ï¼ˆé»˜è®¤: `./dzz_retrieval/chroma_md`ï¼‰
- `top_files`: æ–‡ä»¶çº§æ£€ç´¢è¿”å›çš„æ–‡ä»¶æ•°é‡ï¼ˆé»˜è®¤: 3ï¼‰
- `top_chunks`: æ¯ä¸ªæ–‡ä»¶è¿”å›çš„ä»£ç å—æ•°é‡ï¼ˆé»˜è®¤: 5ï¼‰

æ–°å¢æ–¹æ³•ï¼š
- `_init_dzz_retrieval()`: åˆå§‹åŒ– dzz çš„æ–‡ä»¶æ‘˜è¦å‘é‡åº“

### 3. `_retrieve_code_with_suggestion` æ–¹æ³•
å®Œå…¨é‡å†™ï¼Œä½¿ç”¨ dzz çš„ä¸¤é˜¶æ®µæ£€ç´¢é€»è¾‘ï¼š

**é˜¶æ®µ1ï¼šæ–‡ä»¶çº§æ£€ç´¢**
- ä½¿ç”¨ `kernel_file_summaries` é›†åˆè¿›è¡Œå‘é‡æ£€ç´¢
- æ‰¾åˆ°æœ€ç›¸å…³çš„æºæ–‡ä»¶ï¼ˆé»˜è®¤ top 3ï¼‰

**é˜¶æ®µ2ï¼šä»£ç å—çº§è¯­ä¹‰æ’åº**
- ä½¿ç”¨ `rank_chunks_by_semantic` å¯¹å€™é€‰æ–‡ä»¶ä¸­çš„ä»£ç å—è¿›è¡Œè¯­ä¹‰æ’åº
- è¿”å›æœ€ç›¸å…³çš„ä»£ç å—ï¼ˆé»˜è®¤æ¯ä¸ªæ–‡ä»¶ top 5ï¼‰

### 4. `rank_chunks_by_semantic.py` è·¯å¾„ä¿®å¤
- æ·»åŠ äº†è‡ªåŠ¨è·¯å¾„æ£€æµ‹åŠŸèƒ½
- æ”¯æŒåœ¨ä¸åŒç›®å½•ç»“æ„ä¸‹æ‰¾åˆ° JSON æ–‡ä»¶

## ğŸ§ª æµ‹è¯•ç»“æœ

### æµ‹è¯•æŸ¥è¯¢ï¼š`"Linux å¦‚ä½•å®ç°è¿›ç¨‹è®°è´¦"`

**é˜¶æ®µ1 - æ–‡ä»¶çº§æ£€ç´¢ç»“æœï¼š**
- âœ… `acct.c` (ç›¸ä¼¼åº¦: 0.7519)
- âœ… `tsacct.c` (ç›¸ä¼¼åº¦: 0.6995)
- âœ… `taskstats.c` (ç›¸ä¼¼åº¦: 0.6469)

**é˜¶æ®µ2 - ä»£ç å—çº§æ£€ç´¢ç»“æœï¼š**
- âœ… æ‰¾åˆ° 5 ä¸ªç›¸å…³ä»£ç å—
- âœ… æœ€é«˜ç›¸ä¼¼åº¦: 0.6842
- âœ… ä»£ç å—åŒ…å«å®Œæ•´çš„å‡½æ•°åã€è¡Œå·ã€æè¿°ç­‰ä¿¡æ¯

## ğŸ“Š å·¥ä½œæµç¨‹

ç°åœ¨çš„å®Œæ•´æ£€ç´¢æµç¨‹ï¼š

```
ç”¨æˆ·æŸ¥è¯¢
    â†“
æ­¥éª¤1: ç”Ÿæˆæºç æ£€ç´¢å»ºè®® (CodeRetrievalSuggester)
    â†“
æ­¥éª¤2: ä¸¤é˜¶æ®µæ£€ç´¢ (dzz æ£€ç´¢é€»è¾‘)
    â”œâ”€ é˜¶æ®µ1: æ–‡ä»¶çº§æ£€ç´¢ (kernel_file_summaries é›†åˆ)
    â””â”€ é˜¶æ®µ2: ä»£ç å—çº§è¯­ä¹‰æ’åº (rank_chunks_by_semantic)
    â†“
æ­¥éª¤3: ç”Ÿæˆä»£ç æè¿° (LLM)
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

```python
from simple_rag_workflow import CodeRAGWorkflow

# åˆå§‹åŒ–å·¥ä½œæµ
workflow = CodeRAGWorkflow(
    llm_path="...",
    embedding_model_path="...",
    chroma_md_path="./dzz_retrieval/chroma_md",  # dzz æ£€ç´¢ç³»ç»Ÿè·¯å¾„
    top_files=3,      # æ–‡ä»¶çº§æ£€ç´¢æ•°é‡
    top_chunks=5      # ä»£ç å—çº§æ£€ç´¢æ•°é‡
)

# å¤„ç†æŸ¥è¯¢
response = workflow.process_code_query("Linux å¦‚ä½•å®ç°è¿›ç¨‹è®°è´¦")

# æŸ¥çœ‹ç»“æœ
for chunk in response.retrieved_chunks:
    print(f"æ–‡ä»¶: {chunk.filename}")
    print(f"è·¯å¾„: {chunk.metadata['file_path']}")
    print(f"è¡Œå·: {chunk.metadata['line_range']}")
    print(f"å‡½æ•°: {chunk.metadata['function_name']}")
    print(f"æè¿°: {chunk.metadata['description']}")
    print(f"ç›¸ä¼¼åº¦: {chunk.score}")
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
workflow_wxk/
â”œâ”€â”€ simple_rag_workflow.py          # ä¸»å·¥ä½œæµæ–‡ä»¶ï¼ˆå·²ä¿®æ”¹ï¼‰
â”œâ”€â”€ dzz_retrieval/                  # dzz æ£€ç´¢ç³»ç»Ÿ
â”‚   â”œâ”€â”€ chroma_md/                  # æ–‡ä»¶æ‘˜è¦å‘é‡åº“
â”‚   â”‚   â””â”€â”€ chroma.sqlite3         # ChromaDB æ•°æ®åº“ï¼ˆ487ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ kernel_chunks_with_descriptions.json  # ä»£ç å—æ•°æ®ï¼ˆ437æ–‡ä»¶ï¼Œ3113å—ï¼‰
â”‚   â”œâ”€â”€ rank_chunks_by_semantic.py  # ä»£ç å—è¯­ä¹‰æ’åºï¼ˆå·²ä¿®å¤è·¯å¾„ï¼‰
â”‚   â””â”€â”€ retrieval_engine.py         # åŸå§‹æ£€ç´¢å¼•æ“ï¼ˆå‚è€ƒï¼‰
â”œâ”€â”€ test_dzz_retrieval_integration.py  # å®Œæ•´æµ‹è¯•è„šæœ¬
â””â”€â”€ test_dzz_retrieval_only.py      # è½»é‡çº§æµ‹è¯•è„šæœ¬ï¼ˆä»…æ£€ç´¢ï¼‰
```

## âœ… éªŒè¯æ¸…å•

- [x] dzz æ£€ç´¢ç³»ç»Ÿæ–‡ä»¶å·²å¤åˆ¶
- [x] æ–‡ä»¶æ‘˜è¦å‘é‡åº“åˆå§‹åŒ–æˆåŠŸï¼ˆ487ä¸ªæ–‡ä»¶ï¼‰
- [x] ä»£ç å—ç´¢å¼•åŠ è½½æˆåŠŸï¼ˆ437ä¸ªæ–‡ä»¶ï¼Œ3113ä¸ªä»£ç å—ï¼‰
- [x] æ–‡ä»¶çº§æ£€ç´¢æ­£å¸¸å·¥ä½œ
- [x] ä»£ç å—çº§æ£€ç´¢æ­£å¸¸å·¥ä½œ
- [x] ä¸¤é˜¶æ®µæ£€ç´¢é€»è¾‘é›†æˆæˆåŠŸ
- [x] æ£€ç´¢ç»“æœè½¬æ¢ä¸º RetrievedChunk æ ¼å¼
- [x] å¤‡ç”¨æ£€ç´¢æ–¹æ³•ä¿ç•™ï¼ˆå½“ dzz ç³»ç»Ÿä¸å¯ç”¨æ—¶ï¼‰

## ğŸ”§ æ•…éšœæ’é™¤

### å¦‚æœæ£€ç´¢å¤±è´¥

1. **æ£€æŸ¥è·¯å¾„é…ç½®**
   ```python
   # ç¡®ä¿ chroma_md_path æŒ‡å‘æ­£ç¡®çš„ç›®å½•
   chroma_md_path = "./dzz_retrieval/chroma_md"
   ```

2. **æ£€æŸ¥æ•°æ®æ–‡ä»¶**
   ```bash
   # ç¡®è®¤æ–‡ä»¶å­˜åœ¨
   ls -lh dzz_retrieval/kernel_chunks_with_descriptions.json
   ls -lh dzz_retrieval/chroma_md/chroma.sqlite3
   ```

3. **æ£€æŸ¥é›†åˆåç§°**
   - æ–‡ä»¶æ‘˜è¦é›†åˆåç§°ï¼š`kernel_file_summaries`
   - å¦‚æœé›†åˆä¸å­˜åœ¨ï¼Œä¼šä½¿ç”¨å¤‡ç”¨æ£€ç´¢æ–¹æ³•

### å¤‡ç”¨æ£€ç´¢æ–¹æ³•

å¦‚æœ dzz æ£€ç´¢ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥ï¼Œä¼šè‡ªåŠ¨å›é€€åˆ°åŸæœ‰çš„ `CodeRAGEngine` æ£€ç´¢æ–¹æ³•ã€‚

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ€§èƒ½è€ƒè™‘**
   - æ–‡ä»¶çº§æ£€ç´¢ï¼šå¿«é€Ÿï¼ˆå‘é‡æ£€ç´¢ï¼‰
   - ä»£ç å—çº§æ£€ç´¢ï¼šéœ€è¦åŠ è½½æ¨¡å‹å’Œè®¡ç®—ç›¸ä¼¼åº¦ï¼Œå¯èƒ½è¾ƒæ…¢
   - å»ºè®® `top_files` å’Œ `top_chunks` ä¸è¦è®¾ç½®è¿‡å¤§

2. **æ•°æ®æ›´æ–°**
   - å¦‚æœæ›´æ–°äº† `kernel_chunks_with_descriptions.json`ï¼Œéœ€è¦é‡å¯ç¨‹åº
   - å¦‚æœæ›´æ–°äº†æ–‡ä»¶æ‘˜è¦ï¼Œéœ€è¦é‡æ–°æ„å»º ChromaDB

3. **å†…å­˜ä½¿ç”¨**
   - `rank_chunks_by_semantic` ä¼šåœ¨å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰ä»£ç å—ç´¢å¼•åˆ°å†…å­˜
   - ç¡®ä¿æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼ˆçº¦ 18MB JSON æ–‡ä»¶ï¼‰

## ğŸ‰ æ€»ç»“

dzz æ£€ç´¢ç³»ç»Ÿå·²æˆåŠŸé›†æˆåˆ° `CodeRAGWorkflow` ä¸­ï¼Œä¸¤é˜¶æ®µæ£€ç´¢é€»è¾‘å·¥ä½œæ­£å¸¸ã€‚ç°åœ¨å¯ä»¥ï¼š
- ä½¿ç”¨æ–‡ä»¶çº§æ£€ç´¢å¿«é€Ÿå®šä½ç›¸å…³æ–‡ä»¶
- ä½¿ç”¨ä»£ç å—çº§è¯­ä¹‰æ’åºæ‰¾åˆ°æœ€ç›¸å…³çš„ä»£ç ç‰‡æ®µ
- è·å¾—åŒ…å«å®Œæ•´å…ƒæ•°æ®ï¼ˆæ–‡ä»¶è·¯å¾„ã€è¡Œå·ã€å‡½æ•°åã€æè¿°ï¼‰çš„æ£€ç´¢ç»“æœ

```